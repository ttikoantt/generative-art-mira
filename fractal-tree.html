<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fractal Tree Art - Nature's Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        h1 {
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-shadow: 0 0 20px rgba(100, 200, 255, 0.5);
        }

        canvas {
            border: 2px solid rgba(100, 200, 255, 0.3);
            border-radius: 10px;
            box-shadow: 0 0 40px rgba(100, 200, 255, 0.2);
            background: radial-gradient(circle at center, #1a1a3a 0%, #0a0a1a 100%);
        }

        .controls {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            max-width: 600px;
        }

        .control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .control label {
            color: #8af;
            font-size: 0.9rem;
        }

        .control input[type="range"] {
            width: 150px;
            cursor: pointer;
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            background: linear-gradient(135deg, #4af, #48f);
            color: white;
            box-shadow: 0 4px 15px rgba(68, 170, 255, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 255, 0.5);
        }

        button:active {
            transform: translateY(0);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 15px;
            background: rgba(100, 200, 255, 0.2);
            border: 1px solid rgba(100, 200, 255, 0.5);
            color: #8af;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            z-index: 1000;
        }

        .fullscreen-btn:hover {
            background: rgba(100, 200, 255, 0.3);
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.4rem;
                padding: 0 10px;
            }

            canvas {
                max-width: 95vw;
                max-height: 60vh;
            }

            .controls {
                padding: 0 10px;
            }

            .control input[type="range"] {
                width: 100px;
            }
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">ÂÖ®ÁîªÈù¢</button>
    <h1>üå≥ Fractal Tree Art - Nature's Algorithm</h1>
    <canvas id="canvas" width="700" height="500"></canvas>

    <div class="controls">
        <div class="control">
            <label>Êûù„ÅÆËßíÂ∫¶: <span id="angleValue">25</span>¬∞</label>
            <input type="range" id="angle" min="10" max="45" value="25">
        </div>
        <div class="control">
            <label>Ê∑±„Åï: <span id="depthValue">10</span></label>
            <input type="range" id="depth" min="5" max="14" value="10">
        </div>
        <div class="control">
            <label>Êûù„ÅÆÈï∑„Åï: <span id="lengthValue">100</span></label>
            <input type="range" id="length" min="50" max="150" value="100">
        </div>
        <div class="control">
            <label>È¢®„ÅÆÂº∑„Åï: <span id="windValue">5</span></label>
            <input type="range" id="wind" min="0" max="20" value="5">
        </div>
    </div>

    <div class="buttons">
        <button onclick="randomize()">üé≤ „É©„É≥„ÉÄ„É†</button>
        <button onclick="toggleAnimation()">‚ñ∂Ô∏è „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let angle = 25;
        let depth = 10;
        let branchLength = 100;
        let windStrength = 5;
        let time = 0;
        let animating = false;
        let animationId = null;

        // Get controls
        const angleSlider = document.getElementById('angle');
        const depthSlider = document.getElementById('depth');
        const lengthSlider = document.getElementById('length');
        const windSlider = document.getElementById('wind');

        // Update displays
        angleSlider.addEventListener('input', (e) => {
            angle = parseInt(e.target.value);
            document.getElementById('angleValue').textContent = angle;
            if (!animating) draw();
        });

        depthSlider.addEventListener('input', (e) => {
            depth = parseInt(e.target.value);
            document.getElementById('depthValue').textContent = depth;
            if (!animating) draw();
        });

        lengthSlider.addEventListener('input', (e) => {
            branchLength = parseInt(e.target.value);
            document.getElementById('lengthValue').textContent = branchLength;
            if (!animating) draw();
        });

        windSlider.addEventListener('input', (e) => {
            windStrength = parseInt(e.target.value);
            document.getElementById('windValue').textContent = windStrength;
            if (!animating) draw();
        });

        function drawBranch(x, y, length, angle, depth, time) {
            if (depth === 0) return;

            const endX = x + length * Math.cos(angle * Math.PI / 180);
            const endY = y - length * Math.sin(angle * Math.PI / 180);

            // Color based on depth
            const hue = 120 + (10 - depth) * 15;
            const lightness = 50 + (10 - depth) * 3;
            ctx.strokeStyle = `hsl(${hue}, 70%, ${lightness}%)`;
            ctx.lineWidth = depth * 0.8;

            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(endX, endY);
            ctx.stroke();

            // Wind effect
            const windOffset = Math.sin(time * 0.02 + depth * 0.5) * windStrength * 0.1 * (10 - depth);

            // Recursive branches
            const newLength = length * 0.75;
            const angleVariation = angleSlider.value;

            drawBranch(endX, endY, newLength, angle + angleVariation + windOffset, depth - 1, time);
            drawBranch(endX, endY, newLength, angle - angleVariation + windOffset, depth - 1, time);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = '#2a4a2a';
            ctx.fillRect(0, canvas.height - 30, canvas.width, 30);

            // Draw tree
            drawBranch(canvas.width / 2, canvas.height - 30, branchLength, 90, depth, time);

            // Draw stars
            for (let i = 0; i < 50; i++) {
                const x = (i * 137) % canvas.width;
                const y = (i * 89) % (canvas.height - 100);
                const size = (i % 3) + 1;
                const twinkle = 0.3 + 0.7 * Math.sin(time * 0.05 + i);

                ctx.fillStyle = `rgba(255, 255, 255, ${twinkle * 0.8})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function animate() {
            if (!animating) return;

            time++;
            draw();
            animationId = requestAnimationFrame(animate);
        }

        function toggleAnimation() {
            animating = !animating;
            const btn = event.target;

            if (animating) {
                btn.textContent = '‚è∏Ô∏è ÂÅúÊ≠¢';
                animate();
            } else {
                btn.textContent = '‚ñ∂Ô∏è „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥';
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            }
        }

        function randomize() {
            angle = Math.floor(Math.random() * 35) + 10;
            depth = Math.floor(Math.random() * 9) + 5;
            branchLength = Math.floor(Math.random() * 100) + 50;
            windStrength = Math.floor(Math.random() * 15);

            angleSlider.value = angle;
            depthSlider.value = depth;
            lengthSlider.value = branchLength;
            windSlider.value = windStrength;

            document.getElementById('angleValue').textContent = angle;
            document.getElementById('depthValue').textContent = depth;
            document.getElementById('lengthValue').textContent = branchLength;
            document.getElementById('windValue').textContent = windStrength;

            if (!animating) draw();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                canvas.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Initial draw
        draw();
    </script>
</body>
</html>
