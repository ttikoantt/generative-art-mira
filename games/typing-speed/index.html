<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>„Çø„Ç§„Éî„É≥„Ç∞„Çπ„Éî„Éº„Éâ | Typing Speed</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
            touch-action: manipulation;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: white;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
        }

        .word-display {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .current-word {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .input-area {
            width: 100%;
            padding: 15px;
            font-size: 24px;
            border: 3px solid #667eea;
            border-radius: 12px;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }

        .input-area:focus {
            border-color: #764ba2;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }

        .input-area.correct {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .input-area.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            transition: width 0.3s;
        }

        .mobile-input {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-input {
                display: block;
                width: 100%;
                margin-bottom: 15px;
            }

            .input-area {
                display: none;
            }

            .word-display {
                padding: 30px 15px;
            }

            .current-word {
                font-size: 28px;
            }

            .stat {
                padding: 12px 18px;
            }

            .stat-value {
                font-size: 24px;
            }
        }

        .game-over {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            text-align: center;
        }

        .game-over.show {
            display: flex;
        }

        .game-over h2 {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .final-score {
            font-size: 64px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #10b981;
        }

        .restart-btn {
            padding: 20px 50px;
            font-size: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 30px;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            z-index: 100;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .word-typed {
            color: #10b981;
        }

        .word-remaining {
            color: #666;
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">‚õ∂ ÂÖ®ÁîªÈù¢</button>

    <div class="container">
        <div class="header">
            <h1>‚å®Ô∏è „Çø„Ç§„Éî„É≥„Ç∞„Çπ„Éî„Éº„Éâ</h1>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">„Çπ„Ç≥„Ç¢</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timer">60</div>
                <div class="stat-label">ÊÆã„ÇäÊôÇÈñì</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
        </div>

        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="word-display">
            <div class="current-word" id="wordDisplay">Ê∫ñÂÇô‰∏≠...</div>
        </div>

        <input
            type="text"
            class="input-area"
            id="inputArea"
            placeholder="„Åì„Åì„Å´ÂÖ•Âäõ..."
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
        >

        <input
            type="text"
            class="mobile-input"
            id="mobileInput"
            placeholder="„Åì„Åì„Å´ÂÖ•Âäõ..."
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
        >
    </div>

    <div class="game-over" id="gameOver">
        <h2>üéØ „Ç≤„Éº„É†„Ç™„Éº„Éê„Éº</h2>
        <div class="final-score" id="finalScore">0</div>
        <p style="font-size: 24px; margin-bottom: 30px;">ÂçòË™û„ÇØ„É™„Ç¢</p>
        <button class="restart-btn" onclick="restartGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
    </div>

    <script>
        // ÂçòË™û„É™„Çπ„Éà
        const words = [
            'apple', 'banana', 'cherry', 'dragon', 'elephant', 'flower', 'guitar', 'happy',
            'island', 'jungle', 'kite', 'lemon', 'mountain', 'notebook', 'ocean', 'piano',
            'queen', 'robot', 'star', 'tiger', 'umbrella', 'violet', 'water', 'yellow',
            'adventure', 'beautiful', 'creative', 'diamond', 'energy', 'fantasy',
            'galaxy', 'harmony', 'imagine', 'journey', 'kingdom', 'library',
            'magical', 'natural', 'paradise', 'quartz', 'rainbow', 'symphony',
            'thriller', 'ultimate', 'victory', 'wonderful', 'xylophone', 'yesterday', 'zenith'
        ];

        let currentWord = '';
        let score = 0;
        let timeLeft = 60;
        let gameStarted = false;
        let gameOver = false;
        let timer = null;
        let correctChars = 0;
        let totalChars = 0;

        const wordDisplay = document.getElementById('wordDisplay');
        const inputArea = document.getElementById('inputArea');
        const mobileInput = document.getElementById('mobileInput');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const wpmDisplay = document.getElementById('wpm');
        const progressBar = document.getElementById('progressBar');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreDisplay = document.getElementById('finalScore');

        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function newWord() {
            currentWord = words[Math.floor(Math.random() * words.length)];
            updateWordDisplay();
            inputArea.value = '';
            mobileInput.value = '';
        }

        function updateWordDisplay() {
            const input = gameStarted ? (window.innerWidth <= 768 ? mobileInput.value : inputArea.value) : '';
            let html = '';

            for (let i = 0; i < currentWord.length; i++) {
                if (i < input.length) {
                    if (input[i] === currentWord[i]) {
                        html += `<span class="word-typed">${currentWord[i]}</span>`;
                    } else {
                        html += `<span style="color: #ef4444;">${currentWord[i]}</span>`;
                    }
                } else {
                    html += `<span class="word-remaining">${currentWord[i]}</span>`;
                }
            }

            wordDisplay.innerHTML = html;
        }

        function checkWord() {
            const input = gameStarted ? (window.innerWidth <= 768 ? mobileInput.value : inputArea.value) : '';

            if (input === currentWord) {
                score++;
                correctChars += currentWord.length;
                totalChars += currentWord.length;
                updateStats();
                newWord();
            } else if (input.length >= currentWord.length) {
                inputArea.classList.add('incorrect');
                mobileInput.classList.add('incorrect');
                setTimeout(() => {
                    inputArea.classList.remove('incorrect');
                    mobileInput.classList.remove('incorrect');
                    inputArea.value = '';
                    mobileInput.value = '';
                    updateWordDisplay();
                }, 300);
            }
        }

        function updateStats() {
            scoreDisplay.textContent = score;
            const elapsed = 60 - timeLeft;
            const minutes = elapsed / 60;
            const wpm = minutes > 0 ? Math.round((correctChars / 5) / minutes) : 0;
            wpmDisplay.textContent = wpm;

            const progress = ((60 - timeLeft) / 60) * 100;
            progressBar.style.width = progress + '%';
        }

        function startGame() {
            if (gameStarted) return;

            gameStarted = true;
            newWord();

            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;

                if (timeLeft <= 0) {
                    endGame();
                }

                updateStats();
            }, 1000);
        }

        function endGame() {
            gameOver = true;
            clearInterval(timer);

            finalScoreDisplay.textContent = score;
            gameOverScreen.classList.add('show');
        }

        function restartGame() {
            score = 0;
            timeLeft = 60;
            correctChars = 0;
            totalChars = 0;
            gameStarted = false;
            gameOver = false;

            scoreDisplay.textContent = '0';
            timerDisplay.textContent = '60';
            wpmDisplay.textContent = '0';
            progressBar.style.width = '0%';
            wordDisplay.textContent = 'Ê∫ñÂÇô‰∏≠...';

            gameOverScreen.classList.remove('show');

            inputArea.value = '';
            mobileInput.value = '';

            startGame();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÂÖ•Âäõ
        inputArea.addEventListener('input', () => {
            if (!gameStarted && !gameOver) {
                startGame();
            }
            updateWordDisplay();

            if (inputArea.value.length >= currentWord.length) {
                checkWord();
            }
        });

        // „É¢„Éê„Ç§„É´ÂÖ•Âäõ
        mobileInput.addEventListener('input', () => {
            if (!gameStarted && !gameOver) {
                startGame();
            }
            updateWordDisplay();

            if (mobileInput.value.length >= currentWord.length) {
                checkWord();
            }
        });

        // ÂàùÊúüÂåñ
        wordDisplay.textContent = 'Ê∫ñÂÇô‰∏≠...';
    </script>
</body>
</html>