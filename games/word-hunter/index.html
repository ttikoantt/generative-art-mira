<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Hunter - Typing Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #game {
            width: 100%;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .hud {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            border-bottom: 2px solid #e94560;
        }

        .hud-item {
            color: #e94560;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
        }

        .hud-value {
            color: #fff;
            margin-left: 8px;
        }

        #canvas {
            flex: 1;
            display: block;
        }

        .start-screen, .game-over-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }

        .start-screen h1, .game-over-screen h1 {
            font-size: 48px;
            color: #e94560;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(233, 69, 96, 0.8);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .start-screen p, .game-over-screen p {
            color: #a0aec0;
            font-size: 18px;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.6;
        }

        .btn {
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
            font-family: 'Courier New', monospace;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(233, 69, 96, 0.6);
        }

        .btn:active {
            transform: translateY(0);
        }

        .difficulty {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .difficulty-btn {
            padding: 10px 25px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #e94560;
            color: #e94560;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .difficulty-btn.selected {
            background: #e94560;
            color: #fff;
        }

        .difficulty-btn:hover {
            transform: scale(1.05);
        }

        .hidden {
            display: none !important;
        }

        .combo-display {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffd700;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            z-index: 50;
        }

        .score-popup {
            position: absolute;
            color: #ffd700;
            font-weight: bold;
            font-size: 20px;
            pointer-events: none;
            animation: scorePopup 1s ease-out forwards;
        }

        @keyframes scorePopup {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }

        .fullscreen-btn {
            position: fixed;
            bottom: 70px;
            right: 20px;
            z-index: 100;
            padding: 10px 15px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .hud {
                padding: 10px 15px;
            }

            .hud-item {
                font-size: 12px;
            }

            .start-screen h1, .game-over-screen h1 {
                font-size: 32px;
            }

            .start-screen p, .game-over-screen p {
                font-size: 14px;
                padding: 0 20px;
            }

            .btn {
                padding: 12px 30px;
                font-size: 16px;
            }

            .difficulty {
                flex-wrap: wrap;
                justify-content: center;
            }

            .difficulty-btn {
                padding: 8px 18px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="game">
        <div class="hud">
            <div class="hud-item">Score:<span class="hud-value" id="score">0</span></div>
            <div class="hud-item">Level:<span class="hud-value" id="level">1</span></div>
            <div class="hud-item">Lives:<span class="hud-value" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
            <div class="hud-item">Combo:<span class="hud-value" id="combo">0</span></div>
        </div>

        <canvas id="canvas"></canvas>

        <div class="combo-display" id="comboDisplay"></div>

        <div class="start-screen" id="startScreen">
            <h1>üéØ WORD HUNTER</h1>
            <p>ÂçòË™û„Çí„Çø„Ç§„Éó„Åó„Å¶Êïµ„ÇíÂÄí„ÅõÔºÅ<br>ÂçòË™û„ÅåÂÆåÊàê„Åô„ÇãÂâç„Å´„Çø„Ç§„Éó„Åó„Å¶Ê∂à„Åù„ÅÜ</p>
            <div class="difficulty">
                <button class="difficulty-btn selected" data-difficulty="easy">Easy</button>
                <button class="difficulty-btn" data-difficulty="normal">Normal</button>
                <button class="difficulty-btn" data-difficulty="hard">Hard</button>
            </div>
            <button class="btn" onclick="startGame()">START</button>
        </div>

        <div class="game-over-screen hidden" id="gameOverScreen">
            <h1>GAME OVER</h1>
            <p>Final Score: <span id="finalScore">0</span></p>
            <p>Max Combo: <span id="maxCombo">0</span></p>
            <p>Level Reached: <span id="finalLevel">1</span></p>
            <button class="btn" onclick="restartGame()">RETRY</button>
        </div>

        <button class="fullscreen-btn btn" onclick="toggleFullscreen()">ÂÖ®ÁîªÈù¢</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Word lists by difficulty
        const wordLists = {
            easy: [
                'cat', 'dog', 'run', 'jump', 'happy', 'play', 'blue', 'red',
                'sun', 'moon', 'star', 'tree', 'book', 'love', 'kind', 'good',
                'home', 'time', 'work', 'life', 'open', 'door', 'light', 'dark',
                'fast', 'slow', 'warm', 'cold', 'wind', 'rain', 'snow', 'fire'
            ],
            normal: [
                'adventure', 'beautiful', 'challenge', 'discovery', 'energetic',
                'fantastic', 'greatest', 'happiness', 'important', 'journey',
                'knowledge', 'landscape', 'mountain', 'neighbor', 'opportunity',
                'phenomenon', 'questions', 'resources', 'strategies', 'technology'
            ],
            hard: [
                'acknowledgement', 'breathtaking', 'communication', 'demonstration',
                'extraordinary', 'fundamentally', 'grandiose', 'hypothetically',
                'imagination', 'justification', 'knowledgeable', 'legitimately',
                'mathematical', 'nevertheless', 'opportunistic', 'philosophically',
                'questionable', 'revolutionary', 'sophisticated', 'theoretically'
            ]
        };

        let width, height;
        let words = [];
        let score = 0;
        let level = 1;
        let lives = 3;
        let combo = 0;
        let maxCombo = 0;
        let gameRunning = false;
        let difficulty = 'easy';
        let spawnRate = 2000;
        let lastSpawn = 0;
        let wordSpeed = 1;
        let targetWord = null;
        let typedChars = '';

        const colors = ['#e94560', '#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3'];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resize);
        resize();

        function startGame() {
            score = 0;
            level = 1;
            lives = 3;
            combo = 0;
            maxCombo = 0;
            words = [];
            gameRunning = true;
            spawnRate = difficulty === 'easy' ? 2500 : difficulty === 'normal' ? 2000 : 1500;
            wordSpeed = difficulty === 'easy' ? 1 : difficulty === 'normal' ? 1.5 : 2;

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.add('hidden');
            updateHUD();

            requestAnimationFrame(gameLoop);
        }

        function restartGame() {
            startGame();
        }

        function spawnWord() {
            const wordList = wordLists[difficulty];
            const text = wordList[Math.floor(Math.random() * wordList.length)];

            const word = {
                text: text,
                x: Math.random() * (width - 200) + 100,
                y: 50,
                targetY: height + 50,
                color: colors[Math.floor(Math.random() * colors.length)],
                typed: '',
                speed: wordSpeed + Math.random() * 0.5
            };

            words.push(word);
        }

        function updateWords(deltaTime) {
            for (let i = words.length - 1; i >= 0; i--) {
                const word = words[i];
                word.y += word.speed;

                // Word reached bottom
                if (word.y > word.targetY) {
                    words.splice(i, 1);
                    lives--;
                    combo = 0;
                    updateHUD();

                    if (lives <= 0) {
                        gameOver();
                    }
                }
            }
        }

        function drawWords() {
            ctx.font = 'bold 24px Courier New';

            words.forEach(word => {
                const isTarget = targetWord === word;
                const fontSize = isTarget ? 28 : 24;
                ctx.font = `bold ${fontSize}px Courier New`;

                // Background
                const textWidth = ctx.measureText(word.text).width;
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(word.x - 10, word.y - fontSize - 5, textWidth + 20, fontSize + 20);

                // Border for target
                if (isTarget) {
                    ctx.strokeStyle = word.color;
                    ctx.lineWidth = 3;
                    ctx.strokeRect(word.x - 15, word.y - fontSize - 10, textWidth + 30, fontSize + 30);
                }

                // Untyped portion
                ctx.fillStyle = '#a0aec0';
                ctx.fillText(word.typed, word.x, word.y);

                // Typed portion
                const typedWidth = ctx.measureText(word.typed).width;
                ctx.fillStyle = word.color;
                ctx.fillText(word.text.substring(word.typed.length), word.x + typedWidth, word.y);
            });
        }

        function updateHUD() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('combo').textContent = combo;

            let livesStr = '';
            for (let i = 0; i < lives; i++) livesStr += '‚ù§Ô∏è';
            document.getElementById('lives').textContent = livesStr || 'üíÄ';
        }

        function showComboDisplay() {
            const display = document.getElementById('comboDisplay');
            if (combo >= 5) {
                display.textContent = `üî• ${combo} COMBO!`;
                display.style.display = 'block';
                setTimeout(() => {
                    display.style.display = 'none';
                }, 1000);
            }
        }

        function createScorePopup(x, y, points) {
            const popup = document.createElement('div');
            popup.className = 'score-popup';
            popup.textContent = `+${points}`;
            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;
            document.getElementById('game').appendChild(popup);

            setTimeout(() => {
                popup.remove();
            }, 1000);
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById('gameOverScreen').classList.remove('hidden');
            document.getElementById('finalScore').textContent = score;
            document.getElementById('maxCombo').textContent = maxCombo;
            document.getElementById('finalLevel').textContent = level;
        }

        let lastTime = 0;
        function gameLoop(timestamp) {
            if (!gameRunning) return;

            const deltaTime = timestamp - lastTime;
            lastTime = timestamp;

            // Clear canvas
            ctx.fillStyle = '#0a0e27';
            ctx.fillRect(0, 0, width, height);

            // Spawn words
            if (timestamp - lastSpawn > spawnRate) {
                spawnWord();
                lastSpawn = timestamp;
            }

            // Update words
            updateWords(deltaTime);

            // Draw words
            drawWords();

            requestAnimationFrame(gameLoop);
        }

        // Keyboard input
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;

            const key = e.key.toLowerCase();

            // If no target word, find one starting with this key
            if (!targetWord) {
                for (const word of words) {
                    if (word.text.startsWith(key) && word.typed === '') {
                        targetWord = word;
                        word.typed = key;
                        break;
                    }
                }
            } else {
                // Continue typing target word
                const nextChar = targetWord.text[targetWord.typed.length];
                if (key === nextChar) {
                    targetWord.typed += key;

                    // Word completed
                    if (targetWord.typed === targetWord.text) {
                        combo++;
                        if (combo > maxCombo) maxCombo = combo;

                        const basePoints = targetWord.text.length * 10;
                        const comboBonus = combo * 5;
                        const points = basePoints + comboBonus;
                        score += points;

                        createScorePopup(targetWord.x, targetWord.y, points);
                        showComboDisplay();

                        // Remove completed word
                        const index = words.indexOf(targetWord);
                        if (index > -1) {
                            words.splice(index, 1);
                        }

                        targetWord = null;

                        // Level up
                        if (score > level * 500) {
                            level++;
                            spawnRate = Math.max(800, spawnRate - 200);
                            wordSpeed += 0.2;
                        }

                        updateHUD();
                    }
                } else if (key !== targetWord.text[targetWord.typed.length]) {
                    // Wrong key - reset combo
                    combo = 0;
                    updateHUD();
                }
            }
        });

        // Difficulty selection
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                difficulty = btn.dataset.difficulty;
            });
        });

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
