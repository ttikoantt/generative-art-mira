<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Memory - ÂΩ±„ÅÆË®òÊÜ∂„Ç≤„Éº„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #fff;
            overflow-x: hidden;
        }

        header {
            padding: 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .game-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-label {
            color: #888;
        }

        .info-value {
            font-weight: bold;
            font-size: 1.3rem;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .shadow-container {
            position: relative;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shadow {
            width: 150px;
            height: 150px;
            background: #000;
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .shadow:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }

        .question-mark {
            position: absolute;
            font-size: 4rem;
            color: #ff6b6b;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            margin-top: 30px;
        }

        .option-btn {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #00b894, #00cec9);
            border-color: transparent;
            animation: correctPulse 0.5s ease;
        }

        .option-btn.wrong {
            background: linear-gradient(135deg, #d63031, #e17055);
            border-color: transparent;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .level-display {
            margin-top: 20px;
            font-size: 1rem;
            color: #888;
        }

        .start-screen, .result-screen {
            text-align: center;
            padding: 40px;
        }

        .start-screen h2, .result-screen h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .start-screen p, .result-screen p {
            color: #aaa;
            margin-bottom: 30px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .start-btn, .restart-btn {
            padding: 15px 40px;
            background: linear-gradient(90deg, #ff6b6b, #feca57);
            border: none;
            border-radius: 30px;
            color: #fff;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
        }

        .start-btn:hover, .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 107, 107, 0.6);
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            text-align: center;
        }

        .stat-label {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(90deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border: none;
            border-radius: 50%;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .fullscreen-btn:hover {
            transform: scale(1.1);
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            .game-container {
                max-width: 100%;
            }

            .shadow {
                width: 120px;
                height: 120px;
            }

            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üé≠ Shadow Memory</h1>
        <div class="game-info" id="gameInfo">
            <div class="info-item">
                <span class="info-label">„Çπ„Ç≥„Ç¢</span>
                <span class="info-value" id="score">0</span>
            </div>
            <div class="info-item">
                <span class="info-label">„É¨„Éô„É´</span>
                <span class="info-value" id="level">1</span>
            </div>
            <div class="info-item">
                <span class="info-label">„É©„Ç§„Éï</span>
                <span class="info-value" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
            </div>
        </div>
    </header>

    <main>
        <!-- „Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
        <div class="game-container" id="startScreen">
            <div class="start-screen">
                <h2>ÂΩ±„ÅÆË®òÊÜ∂„Ç≤„Éº„É†</h2>
                <p>„Ç∑„É´„Ç®„ÉÉ„Éà„ÇíË¶ã„Å¶„ÄÅÊ≠£„Åó„ÅÑÁµµ„ÇíÈÅ∏„Åº„ÅÜÔºÅ<br>„É¨„Éô„É´„Åå‰∏ä„Åå„Çã„Åª„Å©Èõ£„Åó„Åè„Å™„Çä„Åæ„Åô„ÄÇ</p>
                <button class="start-btn" id="startBtn">„Çπ„Çø„Éº„Éà</button>
            </div>
        </div>

        <!-- „Ç≤„Éº„É†ÁîªÈù¢ -->
        <div class="game-container hidden" id="gameScreen">
            <div class="shadow-container">
                <div class="shadow" id="shadow"></div>
                <div class="question-mark">?</div>
            </div>
            <div class="options" id="options"></div>
            <div class="level-display" id="levelDisplay">Level 1</div>
        </div>

        <!-- ÁµêÊûúÁîªÈù¢ -->
        <div class="game-container hidden" id="resultScreen">
            <div class="result-screen">
                <h2>„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº</h2>
                <div class="result-stats">
                    <div class="stat-item">
                        <div class="stat-label">ÊúÄÁµÇ„Çπ„Ç≥„Ç¢</div>
                        <div class="stat-value" id="finalScore">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Âà∞ÈÅî„É¨„Éô„É´</div>
                        <div class="stat-value" id="finalLevel">1</div>
                    </div>
                </div>
                <button class="restart-btn" id="restartBtn">„ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
            </div>
        </div>
    </main>

    <button class="fullscreen-btn" id="fullscreenBtn">‚õ∂</button>

    <script>
        // „Ç≤„Éº„É†Áä∂ÊÖã
        let score = 0;
        let level = 1;
        let lives = 3;
        let currentAnswer = '';

        // „Ç∑„É´„Ç®„ÉÉ„Éà„Éá„Éº„ÇøÔºàclip-path „ÅßË°®ÁèæÔºâ
        const silhouetteData = [
            {
                name: 'Êòü',
                clipPath: 'polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)'
            },
            {
                name: '„Éè„Éº„Éà',
                clipPath: 'path("M75,40 C75,20 55,0 30,0 C5,0 0,25 0,25 C0,25 5,60 75,100 C145,60 150,25 150,25 C150,25 145,0 120,0 C95,0 75,20 75,40")'
            },
            {
                name: '‰∏âËßí',
                clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'
            },
            {
                name: '„Å≤„ÅóÂΩ¢',
                clipPath: 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)'
            },
            {
                name: 'ÂÖ≠ËßíÂΩ¢',
                clipPath: 'polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)'
            },
            {
                name: 'ÂÜÜ',
                clipPath: 'circle(50% at 50% 50%)'
            },
            {
                name: 'Âè∞ÂΩ¢',
                clipPath: 'polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%)'
            },
            {
                name: 'Áü¢Âç∞',
                clipPath: 'polygon(0% 20%, 60% 20%, 60% 0%, 100% 50%, 60% 100%, 60% 80%, 0% 80%)'
            },
            {
                name: 'ÂÆ∂',
                clipPath: 'polygon(50% 0%, 100% 40%, 100% 100%, 0% 100%, 0% 40%)'
            },
            {
                name: 'Êúà',
                clipPath: 'path("M50,0 C77.6,0 100,22.4 100,50 C100,77.6 77.6,100 50,100 C61.8,100 72.1,94.1 78.7,85 C65.6,85 55,74.4 55,61 C55,47.6 65.6,37 78.7,37 C72.1,27.9 61.8,22 50,22 C22.4,22 0,44.4 0,72 C0,44.4 22.4,22 50,22 Z")'
            },
            {
                name: 'Èõ≤',
                clipPath: 'path("M25,60 C10,60 0,50 0,35 C0,20 15,10 25,10 C30,0 50,0 60,10 C75,0 95,5 100,20 C115,25 115,45 100,55 C95,65 75,70 60,65 C45,75 25,70 25,60 Z")'
            },
            {
                name: '„É™„Éú„É≥',
                clipPath: 'path("M30,30 L30,50 L70,50 L70,30 L100,20 L100,60 L70,50 L30,50 L0,60 L0,20 Z")'
            }
        ];

        // DOMË¶ÅÁ¥†
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');
        const shadow = document.getElementById('shadow');
        const optionsContainer = document.getElementById('options');
        const scoreEl = document.getElementById('score');
        const levelEl = document.getElementById('level');
        const livesEl = document.getElementById('lives');
        const levelDisplay = document.getElementById('levelDisplay');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        // „Ç≤„Éº„É†ÈñãÂßã
        function startGame() {
            score = 0;
            level = 1;
            lives = 3;
            updateUI();
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            nextRound();
        }

        // Ê¨°„ÅÆ„É©„Ç¶„É≥„Éâ
        function nextRound() {
            // ÁèæÂú®„ÅÆ„É¨„Éô„É´„Å´Âøú„Åò„ÅüÂïèÈ°åÊï∞
            const numChoices = Math.min(2 + Math.floor(level / 2), 4);
            
            // Ê≠£Ëß£„ÇíÈÅ∏Êäû
            const answerIndex = Math.floor(Math.random() * silhouetteData.length);
            const answer = silhouetteData[answerIndex];
            currentAnswer = answer.name;

            // „Ç∑„É´„Ç®„ÉÉ„Éà„ÇíË®≠ÂÆö
            shadow.style.clipPath = answer.clipPath;

            // ÈÅ∏ÊäûËÇ¢„Çí‰ΩúÊàê
            const choices = [answer];
            const usedIndices = new Set([answerIndex]);

            while (choices.length < numChoices) {
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * silhouetteData.length);
                } while (usedIndices.has(randomIndex));

                usedIndices.add(randomIndex);
                choices.push(silhouetteData[randomIndex]);
            }

            // ÈÅ∏ÊäûËÇ¢„Çí„Ç∑„É£„ÉÉ„Éï„É´
            choices.sort(() => Math.random() - 0.5);

            // ÈÅ∏ÊäûËÇ¢„ÇíË°®Á§∫
            optionsContainer.innerHTML = '';
            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = choice.name;
                btn.addEventListener('click', () => selectAnswer(choice.name, btn));
                optionsContainer.appendChild(btn);
            });

            levelDisplay.textContent = `Level ${level}`;
        }

        // ÂõûÁ≠îÈÅ∏Êäû
        function selectAnswer(selected, btn) {
            const allBtns = optionsContainer.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            if (selected === currentAnswer) {
                btn.classList.add('correct');
                score += level * 10;
                setTimeout(() => {
                    level++;
                    updateUI();
                    nextRound();
                }, 1000);
            } else {
                btn.classList.add('wrong');
                lives--;
                updateUI();

                // Ê≠£Ëß£„ÇíË°®Á§∫
                allBtns.forEach(b => {
                    if (b.textContent === currentAnswer) {
                        b.classList.add('correct');
                    }
                });

                setTimeout(() => {
                    if (lives <= 0) {
                        endGame();
                    } else {
                        nextRound();
                    }
                }, 1500);
            }
        }

        // „Ç≤„Éº„É†ÁµÇ‰∫Ü
        function endGame() {
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalLevel').textContent = level;
        }

        // UIÊõ¥Êñ∞
        function updateUI() {
            scoreEl.textContent = score;
            levelEl.textContent = level;
            livesEl.textContent = '‚ù§Ô∏è'.repeat(Math.max(0, lives));
        }

        // ÂÖ®ÁîªÈù¢Ë°®Á§∫
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
    </script>
</body>
</html>
