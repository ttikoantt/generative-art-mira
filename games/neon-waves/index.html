<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Neon Waves - „Éç„Ç™„É≥„Éª„Ç¶„Çß„Ç§„Éñ„Çπ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow: hidden;
            background: #0a0a1a;
        }

        #canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        .ui {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #fff;
            z-index: 100;
        }

        .score {
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .combo {
            font-size: 24px;
            color: #ff00ff;
            text-shadow: 0 0 10px rgba(255, 0, 255, 0.8);
            margin-top: 10px;
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: #00ffff;
            border: 2px solid #00ffff;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .fullscreen-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
            transform: scale(1.05);
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px 60px;
            border-radius: 20px;
            border: 3px solid #00ffff;
            text-align: center;
            display: none;
            z-index: 200;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
        }

        .game-over h2 {
            font-size: 36px;
            color: #ff00ff;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
        }

        .game-over p {
            font-size: 24px;
            color: #00ffff;
            margin: 10px 0;
        }

        .game-over button {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 20px;
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            border: none;
            border-radius: 30px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-over button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(255, 0, 255, 0.8);
        }

        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            text-align: center;
            z-index: 100;
        }

        .start-screen {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px 60px;
            border-radius: 20px;
            border: 3px solid #00ffff;
            text-align: center;
            z-index: 200;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
        }

        .start-screen h1 {
            font-size: 42px;
            color: #00ffff;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .start-screen p {
            font-size: 18px;
            color: #fff;
            margin: 15px 0;
            line-height: 1.6;
        }

        .start-screen button {
            margin-top: 30px;
            padding: 15px 50px;
            font-size: 24px;
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            border: none;
            border-radius: 30px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-screen button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(255, 0, 255, 0.8);
        }

        @media (max-width: 768px) {
            .score {
                font-size: 36px;
            }

            .combo {
                font-size: 18px;
            }

            .game-over, .start-screen {
                padding: 30px 40px;
            }

            .game-over h2, .start-screen h1 {
                font-size: 28px;
            }

            .game-over p, .start-screen p {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="ui">
        <div class="score" id="score">0</div>
        <div class="combo" id="combo"></div>
    </div>

    <button class="fullscreen-btn" onclick="toggleFullscreen()">‚õ∂ ÂÖ®ÁîªÈù¢</button>

    <div class="instructions">
        „ÇØ„É™„ÉÉ„ÇØ/„Çø„ÉÉ„Éó„ÅßÊ≥¢„Çí„Ç≥„É≥„Éà„É≠„Éº„É´ ‚Ä¢ ÈöúÂÆ≥Áâ©„ÇíÈÅø„Åë„Çà„ÅÜ
    </div>

    <div class="start-screen" id="startScreen">
        <h1>üåä Neon Waves</h1>
        <p>„Éç„Ç™„É≥Ëâ≤„ÅÆÊ≥¢„Çí„Ç≥„É≥„Éà„É≠„Éº„É´„Åó„Å¶<br>ÈöúÂÆ≥Áâ©„ÇíÈÅø„Åë„Çà„ÅÜÔºÅ</p>
        <p>„ÇØ„É™„ÉÉ„ÇØ/„Çø„ÉÉ„Éó„ÅßÊ≥¢„Çí„Ç∏„É£„É≥„Éó</p>
        <button onclick="startGame()">„Çπ„Çø„Éº„Éà</button>
    </div>

    <div class="game-over" id="gameOver">
        <h2>üí• Game Over!</h2>
        <p>„Çπ„Ç≥„Ç¢: <span id="finalScore">0</span></p>
        <p>ÊúÄÈ´ò„Çπ„Ç≥„Ç¢: <span id="highScore">0</span></p>
        <button onclick="restartGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;

        // Game state
        let gameRunning = false;
        let score = 0;
        let combo = 0;
        let highScore = localStorage.getItem('neonWavesHighScore') || 0;
        let gameSpeed = 3;
        let time = 0;

        // Wave
        let waveY = 0;
        let waveVelocity = 0;
        let waveAmplitude = 50;
        let wavePhase = 0;

        // Obstacles
        let obstacles = [];

        // Particles
        let particles = [];

        // Resize handler
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            waveY = height * 0.7;
        }

        window.addEventListener('resize', resize);
        resize();

        // Fullscreen toggle
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Start game
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameOver').style.display = 'none';
            gameRunning = true;
            score = 0;
            combo = 0;
            gameSpeed = 3;
            obstacles = [];
            particles = [];
            waveY = height * 0.7;
            waveVelocity = 0;
            updateScore();
            animate();
        }

        // Restart game
        function restartGame() {
            startGame();
        }

        // Game over
        function gameOver() {
            gameRunning = false;
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('finalScore').textContent = score;

            if (score > highScore) {
                highScore = score;
                localStorage.setItem('neonWavesHighScore', highScore);
            }

            document.getElementById('highScore').textContent = highScore;
        }

        // Update score
        function updateScore() {
            document.getElementById('score').textContent = score;
            document.getElementById('combo').textContent = combo > 1 ? `${combo}x Combo!` : '';
        }

        // Jump
        function jump() {
            if (gameRunning) {
                waveVelocity = -15;
            }
        }

        // Mouse/Touch events
        canvas.addEventListener('mousedown', jump);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            jump();
        });

        // Draw wave
        function drawWave() {
            ctx.beginPath();

            for (let x = 0; x <= width; x += 5) {
                const y = waveY + Math.sin((x * 0.02) + wavePhase) * waveAmplitude;

                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }

            ctx.lineTo(width, height);
            ctx.lineTo(0, height);
            ctx.closePath();

            // Wave gradient
            const waveGradient = ctx.createLinearGradient(0, waveY - 50, 0, height);
            waveGradient.addColorStop(0, `hsl(${time % 360}, 100%, 60%)`);
            waveGradient.addColorStop(0.5, `hsl(${(time + 60) % 360}, 100%, 50%)`);
            waveGradient.addColorStop(1, `hsl(${(time + 120) % 360}, 100%, 40%)`);

            ctx.fillStyle = waveGradient;
            ctx.fill();

            // Wave glow
            ctx.shadowColor = `hsl(${time % 360}, 100%, 60%)`;
            ctx.shadowBlur = 20;
            ctx.strokeStyle = `hsl(${time % 360}, 100%, 80%)`;
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.shadowBlur = 0;
        }

        // Spawn obstacle
        function spawnObstacle() {
            const type = Math.floor(Math.random() * 3);
            let y, width, height;

            if (type === 0) {
                // Top obstacle
                y = 0;
                height = 100 + Math.random() * 150;
                width = 40;
            } else if (type === 1) {
                // Bottom obstacle
                y = height - 150 - Math.random() * 150;
                height = 150;
                width = 40;
            } else {
                // Middle obstacle
                y = height * 0.3 + Math.random() * height * 0.3;
                height = 80;
                width = 60;
            }

            obstacles.push({
                x: width + 50,
                y: y,
                width: width,
                height: height,
                passed: false
            });
        }

        // Draw obstacles
        function drawObstacles() {
            obstacles.forEach((obs, index) => {
                // Obstacle gradient
                const obsGradient = ctx.createLinearGradient(obs.x, obs.y, obs.x + obs.width, obs.y);
                obsGradient.addColorStop(0, '#ff0066');
                obsGradient.addColorStop(0.5, '#ff00ff');
                obsGradient.addColorStop(1, '#ff0066');

                ctx.fillStyle = obsGradient;
                ctx.shadowColor = '#ff00ff';
                ctx.shadowBlur = 15;
                ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                ctx.shadowBlur = 0;

                // Move obstacle
                obs.x -= gameSpeed;

                // Check collision
                if (checkCollision(obs)) {
                    gameOver();
                }

                // Check passed
                if (!obs.passed && obs.x + obs.width < 0) {
                    obs.passed = true;
                    score += 10;
                    combo++;
                    if (combo > 5) {
                        score += 5 * (combo - 5);
                    }
                    updateScore();
                }

                // Remove off-screen obstacles
                if (obs.x + obs.width < 0) {
                    obstacles.splice(index, 1);
                }
            });
        }

        // Check collision
        function checkCollision(obs) {
            const wavePoints = [];

            for (let x = Math.max(0, obs.x); x <= Math.min(width, obs.x + obs.width); x += 10) {
                const y = waveY + Math.sin((x * 0.02) + wavePhase) * waveAmplitude;
                wavePoints.push({ x, y });
            }

            for (const point of wavePoints) {
                if (point.x >= obs.x && point.x <= obs.x + obs.width &&
                    point.y >= obs.y && point.y <= obs.y + obs.height) {
                    return true;
                }
            }

            return false;
        }

        // Draw particles
        function drawParticles() {
            particles.forEach((p, index) => {
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.02;

                if (p.life <= 0) {
                    particles.splice(index, 1);
                    return;
                }

                ctx.fillStyle = `hsla(${p.hue}, 100%, 60%, ${p.life})`;
                ctx.shadowColor = `hsl(${p.hue}, 100%, 60%)`;
                ctx.shadowBlur = 10;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            });
        }

        // Create particles
        function createParticles(x, y, count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    size: Math.random() * 5 + 2,
                    hue: Math.random() * 360,
                    life: 1
                });
            }
        }

        // Draw background
        function drawBackground() {
            // Gradient background
            const bgGradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width);
            bgGradient.addColorStop(0, '#1a1a2e');
            bgGradient.addColorStop(1, '#0a0a1a');

            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, width, height);

            // Stars
            for (let i = 0; i < 50; i++) {
                const x = (Math.sin(i * 123.4) * 0.5 + 0.5) * width;
                const y = (Math.cos(i * 456.7) * 0.5 + 0.5) * height * 0.7;
                const size = Math.random() * 2;
                const twinkle = Math.sin(time * 0.05 + i) * 0.5 + 0.5;

                ctx.fillStyle = `rgba(255, 255, 255, ${twinkle * 0.5})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Animation loop
        function animate() {
            if (!gameRunning) return;

            // Clear
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, width, height);

            // Draw background
            drawBackground();

            // Update wave
            waveVelocity += 0.8; // Gravity
            waveY += waveVelocity;
            wavePhase += 0.05;

            // Boundary
            if (waveY < height * 0.3) {
                waveY = height * 0.3;
                waveVelocity = 0;
            }
            if (waveY > height * 0.9) {
                waveY = height * 0.9;
                waveVelocity = 0;
            }

            // Draw wave
            drawWave();

            // Spawn obstacles
            if (Math.random() < 0.02) {
                spawnObstacle();
            }

            // Draw obstacles
            drawObstacles();

            // Draw particles
            drawParticles();

            // Create trail particles
            if (Math.random() < 0.3) {
                createParticles(width * 0.5, waveY, 1);
            }

            // Update time and speed
            time += 0.5;
            gameSpeed = 3 + (score / 500);

            requestAnimationFrame(animate);
        }

        // Initial draw
        function drawInitial() {
            drawBackground();
            waveY = height * 0.7;
            drawWave();
        }

        drawInitial();

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!gameRunning && document.getElementById('startScreen').style.display !== 'none') {
                    startGame();
                } else if (!gameRunning) {
                    restartGame();
                } else {
                    jump();
                }
            }
        });
    </script>
</body>
</html>