<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Game | „Éü„É©„ÅÆ„Ç≤„Éº„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 3s ease infinite;
            background-size: 300% 300%;
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .stat-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
        }

        .stat-box.wpm .stat-value {
            color: #48dbfb;
        }

        .stat-box.accuracy .stat-value {
            color: #feca57;
        }

        .stat-box.time .stat-value {
            color: #ff6b6b;
        }

        .text-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            line-height: 1.8;
            min-height: 100px;
            position: relative;
            overflow: hidden;
        }

        .text-display .char {
            display: inline;
            transition: all 0.1s;
        }

        .text-display .char.correct {
            color: #48dbfb;
        }

        .text-display .char.incorrect {
            color: #ff6b6b;
            text-decoration: underline;
        }

        .text-display .char.current {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #textInput {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s;
        }

        #TextInput:focus {
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        #textInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.primary {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border: none;
            font-weight: bold;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .difficulty-btn {
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .difficulty-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .difficulty-btn.active {
            background: linear-gradient(135deg, #48dbfb, #764ba2);
            border-color: #48dbfb;
            color: #fff;
        }

        .result-screen {
            display: none;
            text-align: center;
        }

        .result-screen.show {
            display: block;
        }

        .result-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #feca57;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .result-stat {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .result-stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #fff;
        }

        .hidden {
            display: none !important;
        }

        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
            }

            .text-display {
                font-size: 1rem;
                line-height: 1.6;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>‚å®Ô∏è Typing Speed Game</h1>
        <p class="subtitle">Ë°®Á§∫„Åï„Çå„Åü„ÉÜ„Ç≠„Çπ„Éà„Çí„Åß„Åç„Çã„Å†„ÅëÈÄü„ÅèÊ≠£Á¢∫„Å´„Çø„Ç§„Éî„É≥„Ç∞</p>

        <div id="gameScreen">
            <div class="stats">
                <div class="stat-box wpm">
                    <div class="stat-label">WPM</div>
                    <div class="stat-value" id="wpm">0</div>
                </div>
                <div class="stat-box accuracy">
                    <div class="stat-label">Ê≠£Á¢∫Áéá</div>
                    <div class="stat-value" id="accuracy">100%</div>
                </div>
                <div class="stat-box time">
                    <div class="stat-label">ÊôÇÈñì</div>
                    <div class="stat-value" id="time">0s</div>
                </div>
            </div>

            <div class="difficulty-selector">
                <button class="difficulty-btn active" data-difficulty="easy">üòä Êòì„Åó„ÅÑ</button>
                <button class="difficulty-btn" data-difficulty="medium">ü§î ÊôÆÈÄö</button>
                <button class="difficulty-btn" data-difficulty="hard">üò∞ Èõ£„Åó„ÅÑ</button>
            </div>

            <div class="text-display" id="textDisplay"></div>

            <div class="input-area">
                <input type="text" id="textInput" placeholder="„Åì„Åì„Å´„Çø„Ç§„Éî„É≥„Ç∞..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </div>

            <div class="controls">
                <button class="primary" id="startBtn">üöÄ „Çπ„Çø„Éº„Éà</button>
                <button id="resetBtn">üîÑ „É™„Çª„ÉÉ„Éà</button>
            </div>
        </div>

        <div id="resultScreen" class="result-screen">
            <div class="result-title">üéâ ÁµêÊûúÁô∫Ë°®</div>
            <div class="result-stats">
                <div class="result-stat">
                    <div class="result-stat-label">WPM</div>
                    <div class="result-stat-value" id="finalWpm">0</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-label">Ê≠£Á¢∫Áéá</div>
                    <div class="result-stat-value" id="finalAccuracy">0%</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-label">ÊôÇÈñì</div>
                    <div class="result-stat-value" id="finalTime">0s</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-label">ÊñáÂ≠óÊï∞</div>
                    <div class="result-stat-value" id="finalChars">0</div>
                </div>
            </div>
            <div class="controls">
                <button class="primary" id="playAgainBtn">üîÑ „ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
            </div>
        </div>
    </div>

    <button class="fullscreen-btn" id="fullscreenBtn">‚õ∂</button>

    <script>
        const texts = {
            easy: [
                "The quick brown fox jumps over the lazy dog.",
                "A journey of a thousand miles begins with a single step.",
                "To be or not to be that is the question.",
                "All that glitters is not gold.",
                "The early bird catches the worm.",
                "Practice makes perfect.",
                "Time flies when you are having fun.",
                "Life is what happens when you are busy making other plans.",
                "The only way to do great work is to love what you do.",
                "In the middle of difficulty lies opportunity."
            ],
            medium: [
                "The art of programming is the art of organizing complexity; of mastering multitude and avoiding its bastard chaos as effectively as possible.",
                "Premature optimization is the root of all evil in programming. We should forget about small efficiencies, say about 97% of the time.",
                "The computer was born to solve problems that did not exist before. No amount of genius can overcome a preoccupation with detail.",
                "Software is like entropy: it is difficult to grasp, weighs nothing, and obeys the Second Law of Thermodynamics; i.e., it always increases.",
                "There are two ways of constructing a software design: One way is to make it so simple that there are obviously no deficiencies.",
                "The first 90 percent of the code accounts for the first 90 percent of the development time. The remaining 10 percent accounts for the other 90 percent.",
                "Programming is the art of telling another human what one wants the computer to do. Complexity is the enemy of reliability and maintainability.",
                "The most disastrous thing that you can ever learn is your first programming language. The best programmers are the ones who learn many languages.",
                "Any fool can write code that a computer can understand. Good programmers write code that humans can understand. Programs must be written for people to read.",
                "Controlling complexity is the essence of computer programming. Complexity is the single major difficulty in the successful development of large programs."
            ],
            hard: [
                "The quixotic quagmire of quicksilver quintessences quite bewilderingly questioned questionable quasi-quantum quandaries, quizzically quashing quizzical qualities.",
                "Pythagorean philosophical ponderings perpetually pervade perplexing paradigms, precipitously proliferating powerful, profound, pragmatic principles per particular paradigms.",
                "Syntactically sophisticated scripts systematically synthesize several significant symbolic structures, successfully showcasing superior software engineering standards.",
                "Cryptographic computational conundrums consistently confound clever computer scientists' collective cognitive capabilities, creating complex conceptual conundrums.",
                "Juxtaposed juxtapositions justifiably judge jocular journalistic jargon, joyfully jabbering jagged juxtapositions journalistically jumping judgmental justifications.",
                "Magnanimous meteorological manifestations mesmerize meticulous meteorologists' mind-boggling mathematical models, measuring miscellaneous moisture movement mechanisms.",
                "Extraordinarily exaggerated exemplifications exhibit exceptional excellence, expertly explaining eclectic experimental endeavors' extraordinary external effects.",
                "Omnipotent operational orchestration optimizes organizational objectives, orchestrating outstanding opportunities, overcoming overwhelming operational obstacles.",
                "Phenomenological philosophy's profound perspectives perpetually puzzle people's perceptions, precipitously provoking powerful philosophical paradigm proliferations.",
                "Surreptitious serendipitous situations significantly stimulate subconscious sensations, spontaneously sparking spectacular sentimental sensations, supremely satisfying souls."
            ]
        };

        let currentText = '';
        let currentIndex = 0;
        let correctChars = 0;
        let incorrectChars = 0;
        let startTime = null;
        let timerInterval = null;
        let gameActive = false;
        let currentDifficulty = 'easy';

        const textDisplay = document.getElementById('textDisplay');
        const textInput = document.getElementById('textInput');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const timeDisplay = document.getElementById('time');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        function init() {
            newText();
            setupEventListeners();
        }

        function setupEventListeners() {
            startBtn.addEventListener('click', startGame);
            resetBtn.addEventListener('click', resetGame);
            playAgainBtn.addEventListener('click', () => {
                resultScreen.classList.remove('show');
                gameScreen.classList.remove('hidden');
                resetGame();
            });

            textInput.addEventListener('input', handleInput);
            textInput.addEventListener('focus', () => {
                if (gameActive) textInput.value = '';
            });

            difficultyBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    difficultyBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentDifficulty = btn.dataset.difficulty;
                    if (!gameActive) newText();
                });
            });

            fullscreenBtn.addEventListener('click', toggleFullscreen);
        }

        function newText() {
            const textArray = texts[currentDifficulty];
            currentText = textArray[Math.floor(Math.random() * textArray.length)];
            displayText();
            currentIndex = 0;
            correctChars = 0;
            incorrectChars = 0;
        }

        function displayText() {
            textDisplay.innerHTML = '';
            currentText.split('').forEach((char, index) => {
                const span = document.createElement('span');
                span.textContent = char;
                span.className = 'char';
                if (index === 0) span.classList.add('current');
                textDisplay.appendChild(span);
            });
        }

        function startGame() {
            if (gameActive) return;

            gameActive = true;
            startTime = new Date();
            textInput.value = '';
            textInput.focus();
            startBtn.disabled = true;
            startBtn.textContent = '‚è≥ „Çø„Ç§„Éî„É≥„Ç∞‰∏≠...';

            timerInterval = setInterval(updateTimer, 100);
        }

        function handleInput(e) {
            if (!gameActive) {
                startGame();
            }

            const typed = e.target.value;
            const chars = textDisplay.querySelectorAll('.char');

            // Reset all character classes
            chars.forEach(char => {
                char.classList.remove('correct', 'incorrect', 'current');
            });

            // Mark typed characters
            for (let i = 0; i < chars.length; i++) {
                if (i < typed.length) {
                    if (typed[i] === currentText[i]) {
                        chars[i].classList.add('correct');
                    } else {
                        chars[i].classList.add('incorrect');
                    }
                } else if (i === typed.length) {
                    chars[i].classList.add('current');
                }
            }

            // Update statistics
            updateStats(typed);

            // Check if complete
            if (typed.length >= currentText.length) {
                endGame();
            }
        }

        function updateStats(typed) {
            correctChars = 0;
            incorrectChars = 0;

            for (let i = 0; i < typed.length; i++) {
                if (typed[i] === currentText[i]) {
                    correctChars++;
                } else {
                    incorrectChars++;
                }
            }

            const totalChars = correctChars + incorrectChars;
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            const timeElapsed = (new Date() - startTime) / 1000 / 60; // in minutes
            const wpm = timeElapsed > 0 ? Math.round((correctChars / 5) / timeElapsed) : 0;

            wpmDisplay.textContent = wpm;
            accuracyDisplay.textContent = accuracy + '%';
        }

        function updateTimer() {
            if (!startTime) return;
            const elapsed = Math.floor((new Date() - startTime) / 1000);
            timeDisplay.textContent = elapsed + 's';
        }

        function endGame() {
            gameActive = false;
            clearInterval(timerInterval);

            const timeElapsed = ((new Date() - startTime) / 1000).toFixed(1);
            const totalChars = correctChars + incorrectChars;
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            const timeInMinutes = (new Date() - startTime) / 1000 / 60;
            const wpm = timeInMinutes > 0 ? Math.round((correctChars / 5) / timeInMinutes) : 0;

            // Show results
            document.getElementById('finalWpm').textContent = wpm;
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            document.getElementById('finalTime').textContent = timeElapsed + 's';
            document.getElementById('finalChars').textContent = totalChars;

            gameScreen.classList.add('hidden');
            resultScreen.classList.add('show');

            // Reset button
            startBtn.disabled = false;
            startBtn.textContent = 'üöÄ „Çπ„Çø„Éº„Éà';
        }

        function resetGame() {
            gameActive = false;
            clearInterval(timerInterval);
            startTime = null;
            currentIndex = 0;
            correctChars = 0;
            incorrectChars = 0;

            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            timeDisplay.textContent = '0s';
            textInput.value = '';

            startBtn.disabled = false;
            startBtn.textContent = 'üöÄ „Çπ„Çø„Éº„Éà';

            newText();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        init();
    </script>
</body>
</html>
