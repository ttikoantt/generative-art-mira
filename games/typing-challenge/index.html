<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Typing Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            font-family: 'Courier New', monospace;
            color: #fff;
            overflow: hidden;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .stats {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            font-size: 1.2rem;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.6;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .word-display {
            font-size: 3rem;
            margin-bottom: 40px;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 0 20px rgba(100, 200, 255, 0.5);
        }

        .word-display .typed {
            color: #4ade80;
        }

        .word-display .current {
            background: rgba(100, 200, 255, 0.3);
            border-radius: 4px;
            padding: 0 2px;
        }

        .word-display .remaining {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-area {
            width: 100%;
            max-width: 500px;
        }

        #wordInput {
            width: 100%;
            padding: 20px;
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        #wordInput:focus {
            outline: none;
            border-color: #60a5fa;
            background: rgba(255, 255, 255, 0.15);
        }

        .start-screen, .game-over-screen {
            text-align: center;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 26, 0.95);
            z-index: 100;
        }

        .game-over-screen {
            display: none;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(100, 200, 255, 0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.7;
            margin-bottom: 40px;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 30px;
            color: #fff;
            cursor: pointer;
            font-family: inherit;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(100, 100, 255, 0.4);
        }

        .final-score {
            font-size: 4rem;
            margin: 30px 0;
            color: #4ade80;
        }

        .final-stats {
            margin: 20px 0;
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .combo-display {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: bold;
            opacity: 0;
            pointer-events: none;
            text-shadow: 0 0 30px rgba(255, 200, 100, 0.8);
            transition: opacity 0.3s;
        }

        .combo-display.show {
            opacity: 1;
            animation: comboPopup 0.5s ease-out;
        }

        @keyframes comboPopup {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        .timer-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #f59e0b, #ef4444);
            transition: width 0.1s;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .word-display {
                font-size: 2rem;
            }

            .stats {
                gap: 15px;
                font-size: 1rem;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            #wordInput {
                font-size: 1.2rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="timer-bar" id="timerBar"></div>
    <div class="combo-display" id="comboDisplay"></div>

    <div class="game-container">
        <div class="stats">
            <div class="stat">
                <div class="stat-label">SCORE</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">LEVEL</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat">
                <div class="stat-label">COMBO</div>
                <div class="stat-value" id="combo">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">TIME</div>
                <div class="stat-value" id="time">60</div>
            </div>
        </div>

        <div class="word-display" id="wordDisplay"></div>

        <div class="input-area">
            <input type="text" id="wordInput" placeholder="Type here..." autocomplete="off">
        </div>
    </div>

    <div class="start-screen" id="startScreen">
        <h1>‚å®Ô∏è Speed Typing</h1>
        <div class="subtitle">Type the words as fast as you can!</div>
        <button class="btn" id="startBtn">Start Game</button>
    </div>

    <div class="game-over-screen" id="gameOverScreen">
        <h1>üéØ Game Over</h1>
        <div class="final-score" id="finalScore">0</div>
        <div class="final-stats" id="finalStats"></div>
        <button class="btn" id="restartBtn">Play Again</button>
    </div>

    <script>
        const words = [
            'quick', 'brown', 'fox', 'jumps', 'lazy', 'dog', 'hello', 'world',
            'code', 'game', 'typing', 'speed', 'fast', 'slow', 'keyboard',
            'mouse', 'screen', 'pixel', 'color', 'sound', 'music', 'rhythm',
            'dance', 'play', 'score', 'level', 'combo', 'skill', 'master',
            'challenge', 'victory', 'defeat', 'winner', 'loser', 'player',
            'computer', 'program', 'function', 'variable', 'constant', 'loop',
            'array', 'object', 'string', 'number', 'boolean', 'null', 'undefined',
            'javascript', 'python', 'ruby', 'java', 'swift', 'kotlin', 'rust',
            'browser', 'chrome', 'safari', 'firefox', 'edge', 'opera', 'brave',
            'website', 'internet', 'network', 'server', 'client', 'database',
            'algorithm', 'data', 'structure', 'design', 'pattern', 'system',
            'interface', 'class', 'method', 'property', 'event', 'listener',
            'animation', 'transition', 'transform', 'style', 'layout', 'grid',
            'flexbox', 'responsive', 'mobile', 'desktop', 'tablet', 'phone',
            'apple', 'google', 'microsoft', 'amazon', 'facebook', 'twitter',
            'youtube', 'netflix', 'spotify', 'twitch', 'discord', 'slack',
            'zoom', 'skype', 'telegram', 'whatsapp', 'instagram', 'tiktok',
            'reddit', 'pinterest', 'linkedin', 'github', 'gitlab', 'bitbucket',
            'docker', 'kubernetes', 'aws', 'azure', 'cloud', 'container'
        ];

        let currentWord = '';
        let score = 0;
        let level = 1;
        let combo = 0;
        let maxCombo = 0;
        let timeLeft = 60;
        let gameActive = false;
        let timer = null;
        let wordsCompleted = 0;

        const wordDisplay = document.getElementById('wordDisplay');
        const wordInput = document.getElementById('wordInput');
        const scoreEl = document.getElementById('score');
        const levelEl = document.getElementById('level');
        const comboEl = document.getElementById('combo');
        const timeEl = document.getElementById('time');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const finalScoreEl = document.getElementById('finalScore');
        const finalStatsEl = document.getElementById('finalStats');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const timerBar = document.getElementById('timerBar');
        const comboDisplay = document.getElementById('comboDisplay');

        function getRandomWord() {
            return words[Math.floor(Math.random() * words.length)];
        }

        function displayWord() {
            const typedText = wordInput.value;
            let html = '';

            for (let i = 0; i < currentWord.length; i++) {
                if (i < typedText.length) {
                    if (typedText[i] === currentWord[i]) {
                        html += `<span class="typed">${currentWord[i]}</span>`;
                    } else {
                        html += `<span class="current" style="color: #ef4444;">${currentWord[i]}</span>`;
                    }
                } else if (i === typedText.length) {
                    html += `<span class="current">${currentWord[i]}</span>`;
                } else {
                    html += `<span class="remaining">${currentWord[i]}</span>`;
                }
            }

            wordDisplay.innerHTML = html;
        }

        function updateStats() {
            scoreEl.textContent = score;
            levelEl.textContent = level;
            comboEl.textContent = combo;
            timeEl.textContent = timeLeft;
            timerBar.style.width = `${(timeLeft / 60) * 100}%`;
        }

        function showCombo(text) {
            comboDisplay.textContent = text;
            comboDisplay.classList.add('show');
            setTimeout(() => {
                comboDisplay.classList.remove('show');
            }, 500);
        }

        function completeWord() {
            wordsCompleted++;
            combo++;
            if (combo > maxCombo) maxCombo = combo;

            const baseScore = 10;
            const comboBonus = Math.floor(combo / 3) * 5;
            const levelBonus = level * 2;
            const wordScore = baseScore + comboBonus + levelBonus;

            score += wordScore;

            if (combo % 5 === 0 && combo > 0) {
                showCombo(`${combo} COMBO!`);
            }

            if (wordsCompleted % 10 === 0) {
                level++;
                showCombo(`LEVEL ${level}!`);
            }

            nextWord();
        }

        function breakCombo() {
            if (combo > 0) {
                combo = 0;
                comboDisplay.textContent = 'COMBO LOST';
                comboDisplay.classList.add('show');
                setTimeout(() => {
                    comboDisplay.classList.remove('show');
                }, 500);
            }
        }

        function nextWord() {
            currentWord = getRandomWord();
            wordInput.value = '';
            displayWord();
            updateStats();
        }

        function startGame() {
            score = 0;
            level = 1;
            combo = 0;
            maxCombo = 0;
            timeLeft = 60;
            wordsCompleted = 0;
            gameActive = true;

            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            wordInput.focus();

            nextWord();

            timer = setInterval(() => {
                timeLeft--;
                updateStats();

                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            gameActive = false;
            clearInterval(timer);

            finalScoreEl.textContent = score;
            finalStatsEl.innerHTML = `
                Words: ${wordsCompleted} | Level: ${level} | Max Combo: ${maxCombo}<br>
                Avg WPM: ${Math.floor(wordsCompleted)}
            `;

            gameOverScreen.style.display = 'flex';
        }

        wordInput.addEventListener('input', () => {
            if (!gameActive) return;

            const typed = wordInput.value;

            if (typed === currentWord) {
                completeWord();
            } else if (!currentWord.startsWith(typed)) {
                breakCombo();
            }

            displayWord();
        });

        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);

        // Keep focus on input
        document.addEventListener('click', () => {
            if (gameActive) {
                wordInput.focus();
            }
        });

        // Prevent form submission on Enter
        wordInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
