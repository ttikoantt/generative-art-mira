<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Word Scramble | Mira</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 36px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .stat {
            text-align: center;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #00d4ff;
        }

        .scrambled-word {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .word {
            font-size: 48px;
            letter-spacing: 10px;
            font-weight: bold;
            color: #7b2cbf;
        }

        .input-area {
            margin-bottom: 30px;
        }

        .input-area input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .input-area input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .input-area input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            flex: 1;
            padding: 18px 30px;
            font-size: 18px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-submit {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            color: white;
        }

        .btn-submit:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .btn-hint {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
        }

        .btn-hint:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-skip {
            background: rgba(255, 100, 100, 0.2);
            color: white;
            backdrop-filter: blur(10px);
        }

        .btn-skip:hover {
            background: rgba(255, 100, 100, 0.3);
        }

        .message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 18px;
            min-height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .message.correct {
            background: rgba(0, 255, 100, 0.2);
            color: #00ff64;
        }

        .message.wrong {
            background: rgba(255, 100, 100, 0.2);
            color: #ff6464;
        }

        .message.hint {
            background: rgba(255, 200, 0, 0.2);
            color: #ffc800;
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 28px;
            }

            .word {
                font-size: 36px;
                letter-spacing: 5px;
            }

            .stats {
                gap: 15px;
            }

            .stat {
                padding: 10px 15px;
            }

            .stat-value {
                font-size: 22px;
            }

            .scrambled-word {
                padding: 20px;
            }

            .buttons {
                flex-direction: column;
            }

            .fullscreen-btn {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">全画面</button>

    <div class="container">
        <div class="header">
            <h1>Word Scramble</h1>
            <p>並べ替えられた単語を解読しよう！</p>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-label">スコア</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">連続正解</div>
                <div class="stat-value" id="streak">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">最高記録</div>
                <div class="stat-value" id="highscore">0</div>
            </div>
        </div>

        <div class="scrambled-word">
            <div class="word" id="scrambled-word">...</div>
        </div>

        <div class="input-area">
            <input type="text" id="answer-input" placeholder="答えを入力..." autocomplete="off">
        </div>

        <div class="message" id="message"></div>

        <div class="buttons">
            <button class="btn btn-submit" onclick="submitAnswer()">提出</button>
            <button class="btn btn-hint" onclick="showHint()">ヒント</button>
            <button class="btn btn-skip" onclick="skipWord()">スキップ</button>
        </div>
    </div>

    <script>
        const words = [
            'APPLE', 'BEACH', 'CLOUD', 'DREAM', 'EAGLE',
            'FLAME', 'GRAPE', 'HOUSE', 'IMAGE', 'JUICE',
            'KNIFE', 'LEMON', 'MOUSE', 'NIGHT', 'OCEAN',
            'PIANO', 'QUEEN', 'RIVER', 'SNAKE', 'TIGER',
            'UNITY', 'VOICE', 'WATER', 'XENON', 'YACHT',
            'ZEBRA', 'BRAIN', 'CHAIR', 'DANCE', 'EARTH',
            'FRUIT', 'GHOST', 'HEART', 'INPUT', 'JOINT',
            'KICKS', 'LIGHT', 'MAGIC', 'NOISE', 'ORBIT',
            'PLANT', 'QUERY', 'ROBOT', 'SHEEP', 'TOAST',
            'ULTRA', 'VIDEO', 'WORLD', 'XRAYS', 'YOUNG',
            'ZONE', 'ABOVE', 'BASIC', 'CIVIC', 'DRIVE',
            'EQUAL', 'FAITH', 'GAMES', 'HOTEL', 'INDEX',
            'JOKER', 'KNACK', 'LEVEL', 'MADAM', 'NEEDS',
            'ORDER', 'PANEL', 'QUIET', 'RADAR', 'SAUCE',
            'TENOR', 'UNION', 'VALUE', 'WHEEL', 'XEROX'
        ];

        let currentWord = '';
        let scrambledWord = '';
        let score = 0;
        let streak = 0;
        let highscore = 0;
        let hintsUsed = 0;

        function scrambleWord(word) {
            const chars = word.split('');
            for (let i = chars.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [chars[i], chars[j]] = [chars[j], chars[i]];
            }
            const scrambled = chars.join('');
            return scrambled !== word ? scrambleWord(word) : scrambled;
        }

        function newWord() {
            currentWord = words[Math.floor(Math.random() * words.length)];
            scrambledWord = scrambleWord(currentWord);
            document.getElementById('scrambled-word').textContent = scrambledWord;
            document.getElementById('answer-input').value = '';
            document.getElementById('message').textContent = '';
            document.getElementById('message').className = 'message';
        }

        function submitAnswer() {
            const input = document.getElementById('answer-input').value.toUpperCase().trim();
            const messageEl = document.getElementById('message');

            if (!input) {
                return;
            }

            if (input === currentWord) {
                streak++;
                const points = 10 + streak * 5 - hintsUsed * 3;
                score += Math.max(1, points);
                hintsUsed = 0;

                if (score > highscore) {
                    highscore = score;
                    localStorage.setItem('wordScrambleHighscore', highscore);
                }

                updateStats();
                showMessage(`正解！ +${Math.max(1, points)} ポイント！`, 'correct');
                setTimeout(newWord, 1500);
            } else {
                streak = 0;
                updateStats();
                showMessage('違います... もう一度！', 'wrong');
            }
        }

        function showHint() {
            hintsUsed++;
            const hintLength = Math.min(currentWord.length, Math.ceil(currentWord.length / 2));
            const hint = currentWord.substring(0, hintLength);
            showMessage(`ヒント: 最初の${hintLength}文字は「${hint}」`, 'hint');
        }

        function skipWord() {
            streak = 0;
            updateStats();
            showMessage(`答えは「${currentWord}」でした`, 'wrong');
            setTimeout(newWord, 1500);
        }

        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
            document.getElementById('highscore').textContent = highscore;
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // イベントリスナー
        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });

        // 初期化
        highscore = parseInt(localStorage.getItem('wordScrambleHighscore')) || 0;
        updateStats();
        newWord();
    </script>
</body>
</html>
