<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmonic Wave Art</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            font-family: 'Segoe UI', sans-serif;
            color: #fff;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf, #e040fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #888;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        canvas {
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.2);
            background: #000;
            cursor: crosshair;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 18px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #00d4ff;
        }

        .control-group input[type="range"] {
            width: 150px;
            cursor: pointer;
        }

        button {
            background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            canvas {
                max-width: 100%;
                height: auto;
            }

            .control-group input[type="range"] {
                width: 120px;
            }
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶</button>

    <h1>ğŸŒŠ Harmonic Wave Art</h1>
    <p class="subtitle">è¤‡æ•°ã®æ­£å¼¦æ³¢ã‚’é‡ã­åˆã‚ã›ã¦ç¾ã—ã„èª¿å’Œãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”Ÿæˆ</p>

    <canvas id="canvas" width="900" height="500"></canvas>

    <div class="controls">
        <div class="control-group">
            <label>æ³¢ã®æ•°: <span id="waveCountValue">5</span></label>
            <input type="range" id="waveCount" min="1" max="15" value="5">
        </div>

        <div class="control-group">
            <label>æŒ¯å¹…: <span id="amplitudeValue">50</span></label>
            <input type="range" id="amplitude" min="10" max="100" value="50">
        </div>

        <div class="control-group">
            <label>å‘¨æ³¢æ•°: <span id="frequencyValue">3</span></label>
            <input type="range" id="frequency" min="1" max="10" value="3">
        </div>

        <div class="control-group">
            <label>é€Ÿåº¦: <span id="speedValue">1.0</span></label>
            <input type="range" id="speed" min="0.1" max="3" step="0.1" value="1.0">
        </div>

        <button onclick="randomize()">ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let waves = [];
        let time = 0;

        // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        let params = {
            waveCount: 5,
            amplitude: 50,
            frequency: 3,
            speed: 1.0
        };

        // æ³¢ã®åˆæœŸåŒ–
        function initWaves() {
            waves = [];
            for (let i = 0; i < params.waveCount; i++) {
                waves.push({
                    offset: Math.random() * Math.PI * 2,
                    frequencyRatio: 1 + (i * 0.5),
                    amplitudeRatio: 1 - (i * 0.05),
                    phase: Math.random() * Math.PI * 2,
                    hue: (360 / params.waveCount) * i
                });
            }
        }

        // è‰²ç›¸ã‚’RGBã«å¤‰æ›
        function hslToRgb(h, s, l) {
            s /= 100;
            l /= 100;
            const a = s * Math.min(l, 1 - l);
            const f = n => {
                const k = (n + h / 30) % 12;
                return l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
            };
            return [Math.round(255 * f(0)), Math.round(255 * f(8)), Math.round(255 * f(4))];
        }

        // æç”»
        function draw() {
            // ãƒ•ã‚§ãƒ¼ãƒ‰åŠ¹æœ
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const centerY = canvas.height / 2;

            // å„æ³¢ã‚’æç”»
            for (let w = 0; w < waves.length; w++) {
                const wave = waves[w];

                ctx.beginPath();
                ctx.strokeStyle = `hsl(${wave.hue}, 80%, 60%)`;
                ctx.lineWidth = 2;

                for (let x = 0; x < canvas.width; x++) {
                    const normalizedX = x / canvas.width;
                    const t = time * params.speed;

                    // è¤‡æ•°ã®æ³¢ã‚’é‡ã­åˆã‚ã›
                    let y = centerY;

                    // åŸºæœ¬æ³¢
                    y += Math.sin(
                        normalizedX * Math.PI * params.frequency * wave.frequencyRatio +
                        t + wave.phase
                    ) * params.amplitude * wave.amplitudeRatio;

                    // é«˜èª¿æ³¢
                    y += Math.sin(
                        normalizedX * Math.PI * params.frequency * wave.frequencyRatio * 2 +
                        t * 1.5 + wave.phase
                    ) * (params.amplitude * 0.3 * wave.amplitudeRatio);

                    if (x === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                ctx.stroke();
            }

            // é‡ã­åˆã‚ã›ã«ã‚ˆã‚‹å…‰ã‚‹åŠ¹æœ
            ctx.globalCompositeOperation = 'lighter';

            for (let w = 0; w < waves.length; w++) {
                const wave = waves[w];

                ctx.beginPath();
                ctx.strokeStyle = `hsla(${wave.hue}, 100%, 70%, 0.1)`;
                ctx.lineWidth = 10;

                for (let x = 0; x < canvas.width; x++) {
                    const normalizedX = x / canvas.width;
                    const t = time * params.speed;

                    let y = centerY;
                    y += Math.sin(
                        normalizedX * Math.PI * params.frequency * wave.frequencyRatio +
                        t + wave.phase
                    ) * params.amplitude * wave.amplitudeRatio;

                    if (x === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                ctx.stroke();
            }

            ctx.globalCompositeOperation = 'source-over';

            time += 0.02;
            requestAnimationFrame(draw);
        }

        // ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ
        function randomize() {
            params.waveCount = Math.floor(Math.random() * 10) + 3;
            params.amplitude = Math.floor(Math.random() * 60) + 30;
            params.frequency = Math.floor(Math.random() * 6) + 2;

            document.getElementById('waveCount').value = params.waveCount;
            document.getElementById('amplitude').value = params.amplitude;
            document.getElementById('frequency').value = params.frequency;

            document.getElementById('waveCountValue').textContent = params.waveCount;
            document.getElementById('amplitudeValue').textContent = params.amplitude;
            document.getElementById('frequencyValue').textContent = params.frequency;

            initWaves();
        }

        // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ
        document.getElementById('waveCount').addEventListener('input', (e) => {
            params.waveCount = parseInt(e.target.value);
            document.getElementById('waveCountValue').textContent = params.waveCount;
            initWaves();
        });

        document.getElementById('amplitude').addEventListener('input', (e) => {
            params.amplitude = parseInt(e.target.value);
            document.getElementById('amplitudeValue').textContent = params.amplitude;
        });

        document.getElementById('frequency').addEventListener('input', (e) => {
            params.frequency = parseInt(e.target.value);
            document.getElementById('frequencyValue').textContent = params.frequency;
        });

        document.getElementById('speed').addEventListener('input', (e) => {
            params.speed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = params.speed.toFixed(1);
        });

        // å…¨ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
        function toggleFullscreen() {
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                document.documentElement.requestFullscreen();
            }
        }

        // åˆæœŸåŒ–
        initWaves();
        draw();

        // ãƒã‚¦ã‚¹/ã‚¿ãƒƒãƒã§æ³¢ã«å½±éŸ¿
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // ãƒã‚¦ã‚¹ä½ç½®ã«åŸºã¥ã„ã¦ä½ç›¸ã‚’å¤‰åŒ–
            waves.forEach((wave, i) => {
                wave.phase += (x / canvas.width - 0.5) * 0.1 * (i + 1);
            });
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const x = e.touches[0].clientX - rect.left;

            waves.forEach((wave, i) => {
                wave.phase += (x / canvas.width - 0.5) * 0.1 * (i + 1);
            });
        });
    </script>
</body>
</html>
