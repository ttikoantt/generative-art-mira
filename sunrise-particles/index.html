<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sunrise Particles</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: #0a0a1a;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        canvas {
            display: block;
            touch-action: none;
        }

        .info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            pointer-events: none;
        }

        .fullscreen-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .fullscreen-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">ğŸŒ… Sunrise Particles - Click to create particles</div>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶ Fullscreen</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let particles = [];
        let time = 0;

        // å¤œæ˜ã‘ã®è‰²ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function getSunriseColor(y, progress) {
            const colors = [
                { pos: 0, r: 10, g: 10, b: 30 },      // æ·±ã„é’é»’
                { pos: 0.3, r: 20, g: 40, b: 80 },    // æš—ã„é’
                { pos: 0.5, r: 100, g: 80, b: 120 },  // ç´«
                { pos: 0.7, r: 255, g: 120, b: 80 },  // ã‚ªãƒ¬ãƒ³ã‚¸
                { pos: 1, r: 255, g: 200, b: 150 }    // æ˜ã‚‹ã„é»„è‰²
            ];

            const normalizedY = y / height;

            for (let i = 0; i < colors.length - 1; i++) {
                if (normalizedY >= colors[i].pos && normalizedY <= colors[i + 1].pos) {
                    const t = (normalizedY - colors[i].pos) / (colors[i + 1].pos - colors[i].pos);
                    const r = Math.round(colors[i].r + (colors[i + 1].r - colors[i].r) * t);
                    const g = Math.round(colors[i].g + (colors[i + 1].g - colors[i].g) * t);
                    const b = Math.round(colors[i].b + (colors[i + 1].b - colors[i].b) * t);
                    return `rgb(${r}, ${g}, ${b})`;
                }
            }
            return colors[colors.length - 1];
        }

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 3 + 1;
                this.speedY = Math.random() * -2 - 0.5;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.life = 1;
                this.decay = Math.random() * 0.005 + 0.002;
                this.color = this.getColor();
            }

            getColor() {
                const hue = Math.random() * 60 + 20; // ã‚ªãƒ¬ãƒ³ã‚¸ã€œé»„è‰²
                const saturation = Math.random() * 30 + 70;
                const lightness = Math.random() * 30 + 50;
                return `hsl(${hue}, ${saturation}%, ${lightness}%)`;
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.life -= this.decay;
                this.size *= 0.99;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        function createParticles(x, y, count = 20) {
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(
                    x + (Math.random() - 0.5) * 50,
                    y + (Math.random() - 0.5) * 50
                ));
            }
        }

        function drawBackground() {
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, '#0a0a1a');
            gradient.addColorStop(0.3, '#142850');
            gradient.addColorStop(0.5, '#6450a0');
            gradient.addColorStop(0.7, '#ff7850');
            gradient.addColorStop(1, '#ffc896');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
        }

        function animate() {
            time += 0.01;

            // èƒŒæ™¯ã‚’æç”»
            drawBackground();

            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’æ›´æ–°ãƒ»æç”»
            particles = particles.filter(p => p.life > 0);
            particles.forEach(p => {
                p.update();
                p.draw();
            });

            // è‡ªå‹•ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ç”Ÿæˆ
            if (Math.random() < 0.1) {
                createParticles(
                    Math.random() * width,
                    height * 0.8 + Math.random() * height * 0.2,
                    5
                );
            }

            // å¤ªé™½ã‚’æç”»
            const sunY = height * 0.75 + Math.sin(time) * 10;
            const sunSize = 50 + Math.sin(time * 0.5) * 5;

            // å¤ªé™½ã®å…‰
            const sunGlow = ctx.createRadialGradient(
                width / 2, sunY, 0,
                width / 2, sunY, sunSize * 3
            );
            sunGlow.addColorStop(0, 'rgba(255, 200, 100, 0.4)');
            sunGlow.addColorStop(1, 'rgba(255, 200, 100, 0)');
            ctx.fillStyle = sunGlow;
            ctx.fillRect(0, 0, width, height);

            // å¤ªé™½æœ¬ä½“
            const sunGradient = ctx.createRadialGradient(
                width / 2, sunY, 0,
                width / 2, sunY, sunSize
            );
            sunGradient.addColorStop(0, '#fff8e0');
            sunGradient.addColorStop(0.5, '#ffd080');
            sunGradient.addColorStop(1, '#ff8040');
            ctx.fillStyle = sunGradient;
            ctx.beginPath();
            ctx.arc(width / 2, sunY, sunSize, 0, Math.PI * 2);
            ctx.fill();

            requestAnimationFrame(animate);
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        window.addEventListener('resize', resize);

        canvas.addEventListener('click', (e) => {
            createParticles(e.clientX, e.clientY, 30);
        });

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            createParticles(touch.clientX, touch.clientY, 30);
        });

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // åˆæœŸåŒ–
        resize();
        animate();
    </script>
</body>
</html>
