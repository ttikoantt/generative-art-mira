<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Art Generator - ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a0a2e 0%, #16213e 50%, #0f0f23 100%);
            color: #e0e0e0;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(90deg, #00ff87, #60efff, #00ff87);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .header p {
            color: #b0b0b0;
            font-size: 1.1em;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            color: #00ff87;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #00ff87;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px #00ff87;
        }

        .value-display {
            text-align: center;
            margin-top: 5px;
            color: #60efff;
            font-size: 1.1em;
        }

        .upload-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .upload-box {
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(0, 255, 135, 0.3);
            border-radius: 20px;
            padding: 50px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .upload-box:hover {
            border-color: #00ff87;
            background: rgba(0, 255, 135, 0.05);
        }

        .upload-box.dragover {
            border-color: #60efff;
            background: rgba(96, 239, 255, 0.1);
        }

        .upload-icon {
            font-size: 4em;
            margin-bottom: 15px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .upload-text {
            color: #b0b0b0;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .upload-subtext {
            color: #808080;
            font-size: 0.9em;
        }

        #imageInput {
            display: none;
        }

        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }

        .preview-box {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .preview-title {
            color: #00ff87;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        #imagePreview {
            max-width: 100%;
            border-radius: 10px;
            display: none;
        }

        #asciiOutput {
            background: #0a0a0a;
            color: #00ff87;
            padding: 20px;
            border-radius: 10px;
            font-size: 8px;
            line-height: 0.6;
            overflow-x: auto;
            white-space: pre;
            text-align: center;
            min-height: 200px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00ff87, #60efff);
            color: #0a0a0a;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 135, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 20px;
            background: rgba(0, 255, 135, 0.2);
            color: #00ff87;
            border: 1px solid #00ff87;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .fullscreen-btn:hover {
            background: rgba(0, 255, 135, 0.3);
            transform: scale(1.05);
        }

        .info-text {
            text-align: center;
            color: #808080;
            font-size: 0.9em;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .preview-container {
                flex-direction: column;
            }

            #asciiOutput {
                font-size: 4px;
                line-height: 0.5;
            }
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">å…¨ç”»é¢</button>

    <div class="container">
        <div class="header">
            <h1>âœ¨ ASCII Art Generator âœ¨</h1>
            <p>ç”»åƒã‚’ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆã«å¤‰æ›</p>
        </div>

        <div class="upload-section">
            <div class="upload-box" id="uploadBox">
                <div class="upload-icon">ğŸ“¤</div>
                <div class="upload-text">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—</div>
                <div class="upload-subtext">JPG, PNG, GIFã«å¯¾å¿œ</div>
            </div>
            <input type="file" id="imageInput" accept="image/*">
        </div>

        <div class="controls">
            <div class="control-group">
                <label>å¹…ï¼ˆæ–‡å­—æ•°ï¼‰</label>
                <input type="range" id="widthSlider" min="30" max="200" value="100">
                <div class="value-display" id="widthValue">100</div>
            </div>

            <div class="control-group">
                <label>æ–‡å­—å¯†åº¦</label>
                <input type="range" id="densitySlider" min="1" max="3" value="2">
                <div class="value-display" id="densityValue">æ¨™æº–</div>
            </div>

            <div class="control-group">
                <label>åè»¢</label>
                <input type="range" id="invertSlider" min="0" max="1" value="0">
                <div class="value-display" id="invertValue">ã‚ªãƒ•</div>
            </div>
        </div>

        <div class="preview-container">
            <div class="preview-box">
                <div class="preview-title">ğŸ“· å…ƒã®ç”»åƒ</div>
                <img id="imagePreview" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                <div id="imagePlaceholder" style="color: #808080; text-align: center; padding: 50px 20px;">
                    ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„
                </div>
            </div>

            <div class="preview-box">
                <div class="preview-title">ğŸ¨ ASCII ã‚¢ãƒ¼ãƒˆ</div>
                <div id="asciiOutput"></div>
                <div class="button-container">
                    <button class="btn btn-primary" onclick="copyAscii()">ã‚³ãƒ”ãƒ¼</button>
                    <button class="btn btn-secondary" onclick="downloadAscii()">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>

        <div class="info-text">
            ğŸ’¡ ãƒ’ãƒ³ãƒˆ: é«˜è§£åƒåº¦ã®ç”»åƒã»ã©ç¾ã—ã„ã‚¢ãƒ¼ãƒˆã«ãªã‚Šã¾ã™
        </div>
    </div>

    <script>
        // ASCIIæ–‡å­—ã‚»ãƒƒãƒˆï¼ˆå¯†åº¦åˆ¥ï¼‰
        const densitySets = {
            1: '@%#*+=-:. ',
            2: '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\\|()1{}[]?-_+~<>i!lI;:,"^`\'. ',
            3: 'Ã‘@#W$9876543210?!abc;:+=-,._                    '
        };

        const densityNames = {
            1: 'ã‚·ãƒ³ãƒ—ãƒ«',
            2: 'æ¨™æº–',
            3: 'è©³ç´°'
        };

        let currentImage = null;

        // DOMè¦ç´ 
        const uploadBox = document.getElementById('uploadBox');
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const imagePlaceholder = document.getElementById('imagePlaceholder');
        const asciiOutput = document.getElementById('asciiOutput');
        const widthSlider = document.getElementById('widthSlider');
        const densitySlider = document.getElementById('densitySlider');
        const invertSlider = document.getElementById('invertSlider');

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        uploadBox.addEventListener('click', () => imageInput.click());
        uploadBox.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadBox.classList.add('dragover');
        });
        uploadBox.addEventListener('dragleave', () => {
            uploadBox.classList.remove('dragover');
        });
        uploadBox.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadBox.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleImage(file);
            }
        });

        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleImage(file);
            }
        });

        widthSlider.addEventListener('input', () => {
            document.getElementById('widthValue').textContent = widthSlider.value;
            if (currentImage) generateAscii();
        });

        densitySlider.addEventListener('input', () => {
            document.getElementById('densityValue').textContent = densityNames[densitySlider.value];
            if (currentImage) generateAscii();
        });

        invertSlider.addEventListener('input', () => {
            document.getElementById('invertValue').textContent = invertSlider.value === '1' ? 'ã‚ªãƒ³' : 'ã‚ªãƒ•';
            if (currentImage) generateAscii();
        });

        // ç”»åƒå‡¦ç†
        function handleImage(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                currentImage = new Image();
                currentImage.onload = () => {
                    imagePreview.src = currentImage.src;
                    imagePreview.style.display = 'block';
                    imagePlaceholder.style.display = 'none';
                    generateAscii();
                };
                currentImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // ASCIIç”Ÿæˆ
        function generateAscii() {
            if (!currentImage) return;

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            const width = parseInt(widthSlider.value);
            const aspectRatio = currentImage.height / currentImage.width;
            const height = Math.floor(width * aspectRatio * 0.55); // æ–‡å­—ã®é«˜ã•è£œæ­£

            canvas.width = width;
            canvas.height = height;

            ctx.drawImage(currentImage, 0, 0, width, height);

            const imageData = ctx.getImageData(0, 0, width, height);
            const pixels = imageData.data;

            const density = parseInt(densitySlider.value);
            const charSet = densitySets[density];
            const inverted = invertSlider.value === '1';

            let ascii = '';

            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const i = (y * width + x) * 4;
                    const r = pixels[i];
                    const g = pixels[i + 1];
                    const b = pixels[i + 2];

                    // ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›
                    let gray = (r * 0.299 + g * 0.587 + b * 0.114);

                    // åè»¢
                    if (inverted) {
                        gray = 255 - gray;
                    }

                    // æ–‡å­—ãƒãƒƒãƒ”ãƒ³ã‚°
                    const charIndex = Math.floor((gray / 255) * (charSet.length - 1));
                    ascii += charSet[charSet.length - 1 - charIndex];
                }
                ascii += '\n';
            }

            asciiOutput.textContent = ascii;
        }

        // ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        function copyAscii() {
            const text = asciiOutput.textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            });
        }

        // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        function downloadAscii() {
            const text = asciiOutput.textContent;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ascii-art.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // å…¨ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>