<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starry ASCII Sky</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(to bottom, #000428, #004e92);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }

        .container {
            text-align: center;
            position: relative;
        }

        h1 {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            letter-spacing: 0.3em;
        }

        canvas {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(100, 150, 255, 0.3);
        }

        .info {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>✦ STARRY ASCII SKY ✦</h1>
        <canvas id="asciiCanvas"></canvas>
        <p class="info">Shooting stars appear randomly ✨</p>
    </div>

    <script>
        const canvas = document.getElementById('asciiCanvas');
        const ctx = canvas.getContext('2d');

        // Canvas size
        const COLS = 80;
        const ROWS = 40;
        const CELL_SIZE = 12;

        canvas.width = COLS * CELL_SIZE;
        canvas.height = ROWS * CELL_SIZE;

        // Star characters with different brightness
        const STAR_CHARS = ['✦', '✧', '★', '☆', '·', '.'];
        const SHOOTING_STAR = '✦';

        // Star class
        class Star {
            constructor() {
                this.x = Math.random() * COLS;
                this.y = Math.random() * ROWS;
                this.brightness = Math.random();
                this.twinkleSpeed = 0.01 + Math.random() * 0.03;
                this.twinklePhase = Math.random() * Math.PI * 2;
            }

            update() {
                this.twinklePhase += this.twinkleSpeed;
                this.brightness = 0.3 + Math.sin(this.twinklePhase) * 0.7;
                if (this.brightness < 0) this.brightness = 0;
                if (this.brightness > 1) this.brightness = 1;
            }

            getChar() {
                const index = Math.floor(this.brightness * (STAR_CHARS.length - 1));
                return STAR_CHARS[index];
            }

            getColor() {
                const colors = [
                    `rgba(255, 255, 255, ${this.brightness})`,
                    `rgba(200, 220, 255, ${this.brightness})`,
                    `rgba(255, 230, 200, ${this.brightness})`,
                    `rgba(200, 255, 255, ${this.brightness})`,
                ];
                return colors[Math.floor(this.brightness * (colors.length - 1))];
            }
        }

        // Shooting star class
        class ShootingStar {
            constructor() {
                this.active = false;
                this.x = 0;
                this.y = 0;
                this.vx = 0;
                this.vy = 0;
                this.trail = [];
                this.life = 0;
            }

            spawn() {
                this.active = true;
                this.x = Math.random() * COLS * 0.7;
                this.y = Math.random() * ROWS * 0.5;
                this.vx = 0.3 + Math.random() * 0.3;
                this.vy = 0.1 + Math.random() * 0.2;
                this.trail = [];
                this.life = 30 + Math.random() * 30;
            }

            update() {
                if (!this.active) return;

                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 10) {
                    this.trail.shift();
                }

                this.x += this.vx;
                this.y += this.vy;
                this.life--;

                if (this.life <= 0 || this.x >= COLS || this.y >= ROWS) {
                    this.active = false;
                }
            }

            draw(ctx) {
                if (!this.active) return;

                // Draw trail
                for (let i = 0; i < this.trail.length; i++) {
                    const alpha = i / this.trail.length;
                    ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.5})`;
                    ctx.font = `${CELL_SIZE * 0.8}px "Courier New"`;
                    ctx.fillText('·', this.trail[i].x * CELL_SIZE, this.trail[i].y * CELL_SIZE + CELL_SIZE);
                }

                // Draw shooting star
                ctx.fillStyle = '#fff';
                ctx.font = `${CELL_SIZE}px "Courier New"`;
                ctx.shadowColor = '#fff';
                ctx.shadowBlur = 10;
                ctx.fillText(SHOOTING_STAR, this.x * CELL_SIZE, this.y * CELL_SIZE + CELL_SIZE);
                ctx.shadowBlur = 0;
            }
        }

        // Create stars
        const stars = [];
        const NUM_STARS = 150;
        for (let i = 0; i < NUM_STARS; i++) {
            stars.push(new Star());
        }

        // Create shooting star
        const shootingStar = new ShootingStar();

        // Draw ASCII grid
        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw stars
            for (const star of stars) {
                star.update();
                ctx.fillStyle = star.getColor();
                ctx.font = `${CELL_SIZE * (0.6 + star.brightness * 0.4)}px "Courier New"`;
                ctx.fillText(star.getChar(), star.x * CELL_SIZE, star.y * CELL_SIZE + CELL_SIZE);
            }

            // Update and draw shooting star
            shootingStar.update();
            shootingStar.draw(ctx);
        }

        // Randomly spawn shooting stars
        function spawnShootingStar() {
            if (!shootingStar.active && Math.random() < 0.01) {
                shootingStar.spawn();
            }
        }

        // Animation loop
        function animate() {
            draw();
            spawnShootingStar();
            requestAnimationFrame(animate);
        }

        animate();

        // Initial clear
        ctx.fillStyle = 'rgba(0, 4, 40, 1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    </script>
</body>
</html>
