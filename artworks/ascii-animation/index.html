<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Animation - Mira</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0f;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        .container {
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #00ff88;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            margin-bottom: 10px;
            text-shadow: 0 0 20px #00ff88;
            letter-spacing: 0.1em;
        }

        .canvas-container {
            background: #111;
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        canvas {
            display: block;
            background: #0a0a0f;
            border-radius: 5px;
        }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: #00ff88;
            color: #0a0a0f;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background: #00cc6a;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .info {
            margin-top: 20px;
            color: #00ff88;
            font-size: clamp(0.8rem, 2vw, 1rem);
            opacity: 0.8;
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #00ff88;
            color: #0a0a0f;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            transition: all 0.3s;
            z-index: 1000;
        }

        .fullscreen-btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">⛶</button>

    <div class="container">
        <h1>ASCII ANIMATION</h1>

        <div class="canvas-container">
            <canvas id="asciiCanvas"></canvas>
        </div>

        <div class="controls">
            <button onclick="changePattern(0)">★ Spiral</button>
            <button onclick="changePattern(1)">♥ Heart</button>
            <button onclick="changePattern(2)">◇ Diamond</button>
            <button onclick="changePattern(3)">⚡ Wave</button>
        </div>

        <div class="info">
            レトロなASCIIアートアニメーション
        </div>
    </div>

    <script>
        const canvas = document.getElementById('asciiCanvas');
        const ctx = canvas.getContext('2d');

        // キャンバスサイズ設定
        function resizeCanvas() {
            const maxWidth = Math.min(window.innerWidth - 80, 600);
            const maxHeight = Math.min(window.innerHeight - 300, 400);
            canvas.width = maxWidth;
            canvas.height = maxHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        let currentPattern = 0;
        let frame = 0;
        const patterns = [spiralPattern, heartPattern, diamondPattern, wavePattern];

        function changePattern(index) {
            currentPattern = index;
            frame = 0;
        }

        // スパイラルパターン
        function spiralPattern(t) {
            const lines = [];
            const size = 20;
            const speed = t * 0.05;

            for (let y = -size; y <= size; y++) {
                let line = '';
                for (let x = -size; x <= size; x++) {
                    const dist = Math.sqrt(x * x + y * y);
                    const angle = Math.atan2(y, x);
                    const spiral = Math.sin(dist * 0.5 - speed) * Math.cos(angle * 3 + speed);
                    if (spiral > 0.3) line += '★';
                    else if (spiral > 0) line += '☆';
                    else line += '·';
                }
                lines.push(line);
            }
            return lines;
        }

        // ハートパターン
        function heartPattern(t) {
            const lines = [];
            const size = 15;
            const beat = Math.sin(t * 0.1) * 0.3 + 1;

            for (let y = size; y >= -size; y--) {
                let line = '';
                for (let x = -size; x <= size; x++) {
                    const scale = 8 * beat;
                    const heart = Math.pow(x * x + y * y - scale * scale, 3) -
                                 x * x * Math.pow(y, 3);
                    if (heart < 0) line += '♥';
                    else line += '·';
                }
                lines.push(line);
            }
            return lines;
        }

        // ダイヤモンドパターン
        function diamondPattern(t) {
            const lines = [];
            const size = 20;
            const pulse = Math.sin(t * 0.08) * 3;

            for (let y = -size; y <= size; y++) {
                let line = '';
                for (let x = -size; x <= size; x++) {
                    const dist = Math.abs(x) + Math.abs(y);
                    const threshold = size - Math.abs(pulse);
                    if (dist <= threshold % size) {
                        const color = Math.floor((dist / size) * 4);
                        const chars = ['◆', '◇', '◆', '◇'];
                        line += chars[color % 4];
                    } else {
                        line += '·';
                    }
                }
                lines.push(line);
            }
            return lines;
        }

        // 波パターン
        function wavePattern(t) {
            const lines = [];
            const width = 40;
            const height = 20;

            for (let y = 0; y < height; y++) {
                let line = '';
                for (let x = 0; x < width; x++) {
                    const wave = Math.sin(x * 0.3 + t * 0.1) * Math.cos(y * 0.3 + t * 0.05);
                    if (wave > 0.5) line += '▓';
                    else if (wave > 0) line += '▒';
                    else if (wave > -0.5) line += '░';
                    else line += '·';
                }
                lines.push(line);
            }
            return lines;
        }

        // レンダリング
        function render() {
            ctx.fillStyle = '#0a0a0f';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const pattern = patterns[currentPattern](frame);
            const fontSize = Math.min(canvas.width / 60, canvas.height / 40, 14);
            ctx.font = `${fontSize}px 'Courier New', monospace`;

            const startX = (canvas.width - pattern[0].length * fontSize * 0.6) / 2;
            const startY = (canvas.height - pattern.length * fontSize) / 2 + fontSize;

            pattern.forEach((line, i) => {
                const colors = ['#00ff88', '#00ccff', '#ff00ff', '#ffff00'];
                ctx.fillStyle = colors[currentPattern];
                ctx.fillText(line, startX, startY + i * fontSize);
            });

            frame++;
            requestAnimationFrame(render);
        }

        render();

        // 全画面表示
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
