<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Wave Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            text-align: center;
            padding: 20px;
        }

        h1 {
            font-size: clamp(1.5rem, 5vw, 3rem);
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff88;
        }

        .ascii-display {
            font-size: clamp(8px, 2vw, 16px);
            line-height: 1.2;
            white-space: pre;
            overflow: hidden;
            background: rgba(0, 255, 136, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            color: #00ff88;
            padding: 12px 24px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: rgba(0, 255, 136, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
            transform: translateY(-2px);
        }

        button.active {
            background: rgba(0, 255, 136, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            color: #00ff88;
            padding: 10px 15px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 5px;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .ascii-display {
                padding: 10px;
            }

            button {
                padding: 10px 16px;
                font-size: 12px;
            }

            .fullscreen-btn {
                padding: 8px 12px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">ÂÖ®ÁîªÈù¢</button>

    <div class="container">
        <h1>üåä ASCII Wave Generator</h1>
        <div class="ascii-display" id="ascii"></div>
        <div class="controls">
            <button onclick="setWave('sine')">Ê≠£Âº¶Ê≥¢</button>
            <button onclick="setWave('triangle')">‰∏âËßíÊ≥¢</button>
            <button onclick="setWave('sawtooth')">„ÅÆ„Åì„Åé„ÇäÊ≥¢</button>
            <button onclick="setWave('interference')">Âπ≤Ê∏âÊ≥¢</button>
            <button onclick="toggleAnimation()">‰∏ÄÊôÇÂÅúÊ≠¢/ÂÜçÁîü</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('ascii');
        let animationId;
        let isAnimating = true;
        let time = 0;
        let waveType = 'sine';

        const chars = ' .:-=+*#%@';
        const width = 80;
        const height = 40;

        function charForValue(value) {
            const index = Math.floor(value * (chars.length - 1));
            return chars[index];
        }

        function generateSineWave(t) {
            let output = '';
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const ny = y / height;
                    const nx = x / width;

                    // Ë§áÊï∞„ÅÆÊ≥¢„ÇíÈáç„Å≠„Å¶Áæé„Åó„ÅÑÂäπÊûú
                    const wave1 = Math.sin((nx * 10 + t * 0.05) * Math.PI * 2);
                    const wave2 = Math.sin((nx * 15 + t * 0.03 + ny * 3) * Math.PI * 2) * 0.5;
                    const wave3 = Math.sin((nx * 8 - t * 0.04) * Math.PI * 2) * 0.3;

                    const value = (wave1 + wave2 + wave3 + 1.5) / 3;

                    // Ê≥¢„ÅÆ‰∏≠ÂøÉ„Å´Ëøë„ÅÑ„Åª„Å©Âº∑Ë™ø
                    const distanceFromCenter = Math.abs(ny - 0.5);
                    const emphasis = Math.max(0, 1 - distanceFromCenter * 2);

                    const finalValue = Math.max(0, Math.min(1, value * emphasis + 0.2));
                    output += charForValue(finalValue);
                }
                output += '\n';
            }
            return output;
        }

        function generateTriangleWave(t) {
            let output = '';
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const ny = y / height;
                    const nx = x / width;

                    const wave1 = Math.abs(((nx * 8 + t * 0.05) % 2) - 1) * 2 - 1;
                    const wave2 = Math.abs(((nx * 12 + t * 0.03 + ny * 2) % 2) - 1) * 2 - 1 * 0.5;

                    const value = (wave1 + wave2 + 1.5) / 3;
                    const distanceFromCenter = Math.abs(ny - 0.5);
                    const emphasis = Math.max(0, 1 - distanceFromCenter * 2);

                    const finalValue = Math.max(0, Math.min(1, value * emphasis + 0.2));
                    output += charForValue(finalValue);
                }
                output += '\n';
            }
            return output;
        }

        function generateSawtoothWave(t) {
            let output = '';
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const ny = y / height;
                    const nx = x / width;

                    const wave1 = ((nx * 10 + t * 0.05) % 1) * 2 - 1;
                    const wave2 = ((nx * 15 - t * 0.03) % 1) * 2 - 1 * 0.5;

                    const value = (wave1 + wave2 + 1.5) / 3;
                    const distanceFromCenter = Math.abs(ny - 0.5);
                    const emphasis = Math.max(0, 1 - distanceFromCenter * 2);

                    const finalValue = Math.max(0, Math.min(1, value * emphasis + 0.2));
                    output += charForValue(finalValue);
                }
                output += '\n';
            }
            return output;
        }

        function generateInterferenceWave(t) {
            let output = '';
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const ny = y / height;
                    const nx = x / width;

                    // Âπ≤Ê∏â„Éë„Çø„Éº„É≥
                    const d1 = Math.sqrt(Math.pow(nx - 0.3, 2) + Math.pow(ny - 0.5, 2));
                    const d2 = Math.sqrt(Math.pow(nx - 0.7, 2) + Math.pow(ny - 0.5, 2));

                    const wave1 = Math.sin((d1 * 30 - t * 0.1) * Math.PI * 2);
                    const wave2 = Math.sin((d2 * 30 - t * 0.1) * Math.PI * 2);

                    const value = (wave1 + wave2 + 2) / 4;
                    const finalValue = Math.max(0, Math.min(1, value));

                    output += charForValue(finalValue);
                }
                output += '\n';
            }
            return output;
        }

        function render() {
            let output;
            switch(waveType) {
                case 'sine':
                    output = generateSineWave(time);
                    break;
                case 'triangle':
                    output = generateTriangleWave(time);
                    break;
                case 'sawtooth':
                    output = generateSawtoothWave(time);
                    break;
                case 'interference':
                    output = generateInterferenceWave(time);
                    break;
                default:
                    output = generateSineWave(time);
            }
            canvas.textContent = output;
        }

        function animate() {
            if (!isAnimating) return;
            time++;
            render();
            animationId = requestAnimationFrame(animate);
        }

        function setWave(type) {
            waveType = type;
            document.querySelectorAll('.controls button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function toggleAnimation() {
            isAnimating = !isAnimating;
            if (isAnimating) {
                animate();
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Start animation
        animate();
    </script>
</body>
</html>
