<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„ÇØ„É™„ÉÉ„ÇØ„Éè„É≥„Çø„Éº | Click Hunter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
            touch-action: manipulation;
        }

        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #game-area {
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }

        .stats {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            z-index: 10;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .stats h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stats p {
            font-size: 14px;
            opacity: 0.8;
        }

        .score-display {
            position: fixed;
            top: 20px;
            right: 20px;
            text-align: right;
            z-index: 10;
        }

        .score-display .score {
            font-size: 48px;
            font-weight: 700;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .score-display .combo {
            font-size: 24px;
            color: #ffcc00;
            margin-top: 5px;
        }

        .score-display .time {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .target {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
            animation: pulse 1s ease-in-out infinite;
            box-shadow: 0 0 20px currentColor;
        }

        .target:active {
            transform: scale(0.9);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .target.hit {
            animation: hit 0.3s ease-out forwards;
        }

        @keyframes hit {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            text-align: center;
        }

        .overlay.hidden {
            display: none;
        }

        .overlay h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .overlay p {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .overlay .final-score {
            font-size: 64px;
            font-weight: 700;
            color: #00ff88;
            margin: 20px 0;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }

        .overlay .stats-detail {
            font-size: 16px;
            margin: 10px 0;
            opacity: 0.7;
        }

        .btn {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.3);
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(0, 255, 136, 0.5);
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            z-index: 50;
            margin-top: 80px;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .effect {
            position: absolute;
            pointer-events: none;
            animation: effectAnim 0.5s ease-out forwards;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px currentColor;
        }

        @keyframes effectAnim {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        @media (max-width: 768px) {
            .stats h1 { font-size: 18px; }
            .stats p { font-size: 12px; }
            .score-display .score { font-size: 36px; }
            .score-display .combo { font-size: 18px; }
            .overlay h2 { font-size: 28px; }
            .overlay .final-score { font-size: 48px; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="stats">
            <h1>üéØ „ÇØ„É™„ÉÉ„ÇØ„Éè„É≥„Çø„Éº</h1>
            <p>„Çø„Éº„Ç≤„ÉÉ„Éà„Çí„ÇØ„É™„ÉÉ„ÇØÔºÅ</p>
        </div>

        <div class="score-display">
            <div class="score" id="score">0</div>
            <div class="combo" id="combo"></div>
            <div class="time" id="time">30</div>
        </div>

        <div id="game-area"></div>

        <button class="fullscreen-btn" onclick="toggleFullscreen()">ÂÖ®ÁîªÈù¢</button>

        <div class="overlay" id="start-overlay">
            <h2>üéØ „ÇØ„É™„ÉÉ„ÇØ„Éè„É≥„Çø„Éº</h2>
            <p>Âá∫Áèæ„Åô„Çã„Çø„Éº„Ç≤„ÉÉ„Éà„ÇíÁ¥†Êó©„Åè„ÇØ„É™„ÉÉ„ÇØÔºÅ</p>
            <p>„Ç≥„É≥„Éú„ÅßÈ´òÂæóÁÇπ„ÇíÁõÆÊåá„Åù„ÅÜ</p>
            <button class="btn" onclick="startGame()">„Çπ„Çø„Éº„Éà</button>
        </div>

        <div class="overlay hidden" id="end-overlay">
            <h2>üéâ „Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ</h2>
            <div class="final-score" id="final-score">0</div>
            <div class="stats-detail" id="max-combo"></div>
            <div class="stats-detail" id="accuracy"></div>
            <button class="btn" onclick="startGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
        </div>
    </div>

    <script>
        let score = 0;
        let combo = 0;
        let maxCombo = 0;
        let timeLeft = 30;
        let gameActive = false;
        let timer = null;
        let spawner = null;
        let clickCount = 0;
        let hitCount = 0;

        const gameArea = document.getElementById('game-area');
        const scoreDisplay = document.getElementById('score');
        const comboDisplay = document.getElementById('combo');
        const timeDisplay = document.getElementById('time');
        const startOverlay = document.getElementById('start-overlay');
        const endOverlay = document.getElementById('end-overlay');
        const finalScoreDisplay = document.getElementById('final-score');
        const maxComboDisplay = document.getElementById('max-combo');
        const accuracyDisplay = document.getElementById('accuracy');

        const targetColors = [
            '#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24',
            '#6c5ce7', '#a29bfe', '#fd79a8', '#00b894'
        ];

        function startGame() {
            score = 0;
            combo = 0;
            maxCombo = 0;
            timeLeft = 30;
            gameActive = true;
            clickCount = 0;
            hitCount = 0;

            updateDisplay();

            startOverlay.classList.add('hidden');
            endOverlay.classList.add('hidden');
            gameArea.innerHTML = '';

            timer = setInterval(() => {
                timeLeft--;
                timeDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);

            spawnTarget();
            spawner = setInterval(spawnTarget, 800);
        }

        function endGame() {
            gameActive = false;
            clearInterval(timer);
            clearInterval(spawner);

            const accuracy = clickCount > 0 ? Math.round((hitCount / clickCount) * 100) : 0;

            finalScoreDisplay.textContent = score;
            maxComboDisplay.textContent = `ÊúÄÂ§ß„Ç≥„É≥„Éú: ${maxCombo}`;
            accuracyDisplay.textContent = `ÂëΩ‰∏≠Áéá: ${accuracy}%`;

            endOverlay.classList.remove('hidden');
        }

        function spawnTarget() {
            if (!gameActive) return;

            const target = document.createElement('div');
            target.className = 'target';

            const size = Math.random() * 40 + 40; // 40-80px
            const x = Math.random() * (window.innerWidth - size);
            const y = Math.random() * (window.innerHeight - size);
            const color = targetColors[Math.floor(Math.random() * targetColors.length)];

            target.style.width = size + 'px';
            target.style.height = size + 'px';
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            target.style.backgroundColor = color;
            target.style.color = color;

            target.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!gameActive) return;

                clickCount++;
                hitCount++;
                combo++;
                maxCombo = Math.max(maxCombo, combo);

                const points = Math.round(10 * (1 + combo * 0.1));
                score += points;

                showEffect(e.clientX, e.clientY, '+' + points, color);
                target.classList.add('hit');
                setTimeout(() => target.remove(), 300);

                updateDisplay();
            });

            gameArea.appendChild(target);

            // Ëá™ÂãïÊ∂àÂéª
            setTimeout(() => {
                if (target.parentNode && !target.classList.contains('hit')) {
                    combo = 0;
                    updateDisplay();
                    target.remove();
                }
            }, 2000);
        }

        function showEffect(x, y, text, color) {
            const effect = document.createElement('div');
            effect.className = 'effect';
            effect.textContent = text;
            effect.style.left = x + 'px';
            effect.style.top = y + 'px';
            effect.style.color = color;
            gameArea.appendChild(effect);
            setTimeout(() => effect.remove(), 500);
        }

        function updateDisplay() {
            scoreDisplay.textContent = score;
            comboDisplay.textContent = combo > 1 ? `${combo} „Ç≥„É≥„Éú!` : '';
            timeDisplay.textContent = timeLeft;
        }

        // „Éü„Çπ„ÇØ„É™„ÉÉ„ÇØ
        gameArea.addEventListener('click', (e) => {
            if (!gameActive || e.target.classList.contains('target')) return;
            clickCount++;
            combo = 0;
            updateDisplay();
        });

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // „Çø„ÉÉ„ÉÅÂØæÂøú
        gameArea.addEventListener('touchstart', (e) => {
            if (e.target.classList.contains('target')) {
                e.target.click();
            }
        });
    </script>
</body>
</html>
