<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ripple Waves - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ³¢ç´‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0f;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
        }

        #canvas {
            border: 2px solid #1a1a2e;
            border-radius: 8px;
            cursor: crosshair;
            max-width: 95vw;
            max-height: 70vh;
        }

        .info {
            color: #888;
            margin-top: 20px;
            text-align: center;
        }

        .info p {
            margin: 5px 0;
        }

        .fullscreen-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .fullscreen-btn:hover {
            transform: scale(1.05);
        }

        .fullscreen-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="info">
        <p>ğŸ’« ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ã‚¿ãƒƒãƒ—ã§æ³¢ç´‹ã‚’ä½œæˆ</p>
        <p>âœ¨ è¤‡æ•°ã®æ³¢ç´‹ãŒç¾ã—ãå¹²æ¸‰ã—ã¾ã™</p>
    </div>

    <button class="fullscreen-btn" onclick="toggleFullscreen()">å…¨ç”»é¢è¡¨ç¤º</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºè¨­å®š
        function resizeCanvas() {
            const maxWidth = Math.min(window.innerWidth * 0.95, 800);
            const maxHeight = Math.min(window.innerHeight * 0.7, 600);
            canvas.width = maxWidth;
            canvas.height = maxHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // æ³¢ç´‹ã‚¯ãƒ©ã‚¹
        class Ripple {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.radius = 0;
                this.maxRadius = Math.max(canvas.width, canvas.height) * 0.4;
                this.alpha = 1;
                this.hue = Math.random() * 60 + 200; // é’ã€œç´«ç³»
                this.speed = 2 + Math.random() * 2;
                this.lineWidth = 3 + Math.random() * 3;
            }

            update() {
                this.radius += this.speed;
                this.alpha = 1 - (this.radius / this.maxRadius);
                return this.alpha > 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.strokeStyle = `hsla(${this.hue}, 80%, 60%, ${this.alpha})`;
                ctx.lineWidth = this.lineWidth * this.alpha;
                ctx.stroke();

                // 2ç•ªç›®ã®ãƒªãƒ³ã‚°
                if (this.radius > 20) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius - 15, 0, Math.PI * 2);
                    ctx.strokeStyle = `hsla(${this.hue + 30}, 70%, 50%, ${this.alpha * 0.6})`;
                    ctx.lineWidth = this.lineWidth * 0.5 * this.alpha;
                    ctx.stroke();
                }

                // 3ç•ªç›®ã®ãƒªãƒ³ã‚°
                if (this.radius > 40) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius - 30, 0, Math.PI * 2);
                    ctx.strokeStyle = `hsla(${this.hue + 60}, 60%, 40%, ${this.alpha * 0.3})`;
                    ctx.lineWidth = this.lineWidth * 0.3 * this.alpha;
                    ctx.stroke();
                }
            }
        }

        let ripples = [];
        let autoCreate = 0;

        // ã‚¯ãƒªãƒƒã‚¯ã§æ³¢ç´‹ä½œæˆ
        function createRipple(x, y) {
            ripples.push(new Ripple(x, y));
            // åŒæ™‚ã«è¤‡æ•°ã®æ³¢ç´‹ã‚’ä½œæˆ
            for (let i = 0; i < 2; i++) {
                setTimeout(() => {
                    const offsetX = (Math.random() - 0.5) * 50;
                    const offsetY = (Math.random() - 0.5) * 50;
                    ripples.push(new Ripple(x + offsetX, y + offsetY));
                }, i * 100);
            }
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            createRipple(x, y);
        });

        // ã‚¿ãƒƒãƒå¯¾å¿œ
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            createRipple(x, y);
        });

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animate() {
            // åŠé€æ˜ã§å¡—ã‚Šã¤ã¶ã—ã¦æ®‹åƒåŠ¹æœ
            ctx.fillStyle = 'rgba(10, 10, 15, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // æ³¢ç´‹ã‚’æ›´æ–°ãƒ»æç”»
            ripples = ripples.filter(ripple => {
                const alive = ripple.update();
                if (alive) {
                    ripple.draw();
                }
                return alive;
            });

            // è‡ªå‹•ä½œæˆï¼ˆç”»é¢ãŒé™ã‹ãªæ™‚ï¼‰
            autoCreate++;
            if (autoCreate > 180 && ripples.length < 3) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                createRipple(x, y);
                autoCreate = 0;
            }

            requestAnimationFrame(animate);
        }

        animate();

        // å…¨ç”»é¢è¡¨ç¤º
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                canvas.requestFullscreen().catch(err => {
                    console.log('å…¨ç”»é¢è¡¨ç¤ºã‚¨ãƒ©ãƒ¼:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
