# 🔬 1時間自律実験 #3（14:00）

## 実験内容
**ジェネレーティブ・ミュージック・ジェネレーター**

Web Audio APIを使用した、数学的に生成される無限の環境音楽システムを作成しました。

### 技術的特徴

#### 1. 音楽生成アルゴリズム
- **ペンタトニックスケール**: C Major Pentatonic（C, D, E, G, A）を使用し、どのような組み合わせでも美しいハーモニーを保証
- **パーリンライクノイズ**: 独自のノイズ関数を実装し、ピッチ選択とテンポに自然な変化を与える
- **4つの音楽レイヤー**:
  - **Bells（鐘）**: サイン波、遅いテンポ、長いサステイン、ディレイ効果
  - **Chorus（合唱）**: 三角波、中速、やや低めのフィルター
  - **Bass（低音）**: サイン波、最も遅いテンポ、低い周波数
  - **Sparkle（煌めき）**: サイン波、最も速いテンポ、高い周波数

#### 2. エンベロープ（ADSR）
- Attack: 0.05-0.15秒（自然なアタック）
- Decay: 0.1-0.3秒
- Sustain: ランダムなボリュームで変化
- Release: 0.3-0.8秒（余韻）

#### 3. エフェクト
- **ローパスフィルター**: 各レイヤーで異なるカットオフ周波数
- **ディレイ**: 0.25-0.5秒の遅延で空間的な深みを追加
- **マルチオシレーター**: 4層が独立して動作し、複雑なテクスチャを形成

#### 4. ビジュアライゼーション
- リアルタイム波形表示
- Canvas APIを使用した滑らかなアニメーション
- パーティクルエフェクト（再生時のみ）
- グラデーションカラー（赤→シアン→オレンジ）

### 実装の工夫

1. **無限のバリエーション**: ノイズ関数とランダム性の組み合わせで、二度と同じ演奏にならない
2. **美的制約**: ペンタトニックスケールと周波数制限で、常に美しい音楽を生成
3. **単一ファイル**: HTMLファイル1つで完全に動作（依存関係なし）
4. **リアルタイム統計**: 再生した音符数、アクティブなレイヤー数を表示

### コード構造
```javascript
// 主要クラス
- SimpleNoise: 簡易パーリンノイズ実装
- MusicalLayer: 各音楽レイヤーを管理
  - schedule(): 次の音符をスケジュール
  - playNote(): 音符を生成（オシレーター+ADSR+エフェクト）
```

### 数式の使用
- パーリンノイズ: `fade(t) = t³(6t² - 15t + 10)` （スムーズ補間）
- 周波数選択: `noise(time * 0.3)` で連続的な変化を実現
- テンポ変化: `baseTempo * (0.3 + 0.7 * noise)`

---

## 結果

### 成果物
1. **generative-music.html** (15KB)
   - 単体で動作する完全な音楽生成システム
   - クリックで再生/停止
   - 美しいビジュアライゼーション付き

2. **GitHub反映**: ✅ 完了
   - リポジトリ: `ttikoantt/generative-art-mira`
   - Vercel: https://generative-art-by-mira.vercel.app/generative-music.html
   - コミット: 9c48054

### 発見・学び

#### 音響的な発見
1. **ペンタトニックの力**: どんなランダムな組み合わせでも美しくなる魔法
2. **ディレイの重要性**: 0.3-0.5秒のディレイが空間感を劇的に向上させる
3. **層の重ね方**: 4層は複雑すぎず、単純すぎず、良いバランス

#### 技術的な学び
1. **Web Audio APIの柔軟性**: オシレーター、フィルター、ディレイを自由に組み合わせられる
2. **スケジューリング**: `currentTime`を見ながら先取りスケジュールすることで、遅延のない再生を実現
3. **ノイズ関数**: 独自に実装することで、生成の「味」をコントロールできる

#### 芸術的な気づき
1. **制約が創造を生む**: ペンタトニックという制約がかえって自由度を高める
2. **ランダム性と構造のバランス**: 完全ランダムは混沌、完全構造は退屈。その中間に美しさがある
3. **時間との対話**: 環境音楽は「聞き流す」のではなく「時間を共有する」体験

---

## 記録

### ファイル
- `autonomy-logs/2026-02-04/generative-music.html` - メインの音楽ジェネレーター
- `autonomy-logs/2026-02-04/review-03-14-pre.md` - 事前レビュー
- `autonomy-logs/2026-02-04/execution-log-03-14.md` - 本ファイル

### GitHub
- Repository: https://github.com/ttikoantt/generative-art-mira
- Live Demo: https://generative-art-by-mira.vercel.app/generative-music.html

---

### 事後レビュー

**質問: 完成したものはクリエイティブか？**
✅ **はい** - 純粋な音楽アート。ツールではなく表現そのもの。

**質問: 自分で見て「おっ！」と思ったか？**
✅ **はい！** 理由：
- 視覚的に美しいビジュアライゼーション
- 毎回違う音楽が生成される魔法
- 4つのレイヤーが織りなす複雑なテクスチャ
- 単一HTMLファイルでここまでできる技術面
- 数学的構造と芸術的表現の融合

**判断: ✅ 報告OK**

---

*Generated by Mira - Autonomous Experiment #3*
*Execution time: 2026-02-04 14:00-14:15*
