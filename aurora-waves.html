<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora Waves - Generative Art</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a1a;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            z-index: 100;
            pointer-events: none;
        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            z-index: 100;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .title {
            position: fixed;
            top: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            z-index: 100;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="title">✨ Aurora Waves</div>
    <div class="info">Move mouse/touch to create waves</div>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">⛶ Fullscreen</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let mouseX = 0, mouseY = 0;
        let targetMouseX = 0, targetMouseY = 0;
        let time = 0;

        // 波動の設定
        const waves = [];
        const waveCount = 8;

        // 色のパレット（オーロラ風）
        const colors = [
            { r: 0, g: 255, b: 200 },    // シアン
            { r: 100, g: 200, b: 255 },  // ライトブルー
            { r: 150, g: 100, b: 255 },  // パープル
            { r: 255, g: 100, b: 200 },  // ピンク
            { r: 100, g: 255, b: 150 }   // ライトグリーン
        ];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        function initWaves() {
            waves.length = 0;
            for (let i = 0; i < waveCount; i++) {
                waves.push({
                    y: height / 2 + (i - waveCount / 2) * 80,
                    amplitude: 30 + Math.random() * 50,
                    frequency: 0.005 + Math.random() * 0.01,
                    phase: Math.random() * Math.PI * 2,
                    speed: 0.02 + Math.random() * 0.03,
                    color: colors[i % colors.length],
                    thickness: 2 + Math.random() * 4
                });
            }
        }

        function drawWave(wave, time) {
            ctx.beginPath();
            ctx.strokeStyle = `rgba(${wave.color.r}, ${wave.color.g}, ${wave.color.b}, 0.8)`;
            ctx.lineWidth = wave.thickness;

            // マウスの影響を計算
            const mouseInfluence = Math.max(0, 1 - Math.abs(mouseY - wave.y) / 200);
            const amplitudeBoost = mouseInfluence * 50;

            for (let x = 0; x < width; x += 2) {
                // 基本の波動
                const baseWave = Math.sin(x * wave.frequency + time * wave.speed + wave.phase);

                // マウスによる波動
                const mouseDist = Math.abs(x - mouseX);
                const mouseWave = mouseInfluence > 0
                    ? Math.sin(mouseDist * 0.02 - time * 0.1) * mouseInfluence * amplitudeBoost
                    : 0;

                // 複合波動
                const y = wave.y + (baseWave * wave.amplitude + mouseWave) * 0.8;

                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }

            ctx.stroke();

            // グロー効果
            ctx.shadowBlur = 20;
            ctx.shadowColor = `rgba(${wave.color.r}, ${wave.color.g}, ${wave.color.b}, 0.5)`;
        }

        function drawParticles() {
            const particleCount = 100;

            for (let i = 0; i < particleCount; i++) {
                const x = (Math.sin(i * 0.1 + time * 0.01) * 0.5 + 0.5) * width;
                const y = (Math.cos(i * 0.15 + time * 0.02) * 0.5 + 0.5) * height;
                const size = 1 + Math.sin(time * 0.05 + i) * 0.5;
                const alpha = 0.3 + Math.sin(time * 0.03 + i * 0.5) * 0.2;

                const colorIndex = Math.floor((i / particleCount) * colors.length);
                const color = colors[colorIndex];

                ctx.beginPath();
                ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function draw() {
            // 背景を少し残してトレイル効果
            ctx.fillStyle = 'rgba(10, 10, 26, 0.1)';
            ctx.fillRect(0, 0, width, height);

            // ブレンドモードで光り効果
            ctx.globalCompositeOperation = 'lighter';

            // パーティクルを描画
            drawParticles();

            // 波を描画
            waves.forEach(wave => drawWave(wave, time));

            // ブレンドモードをリセット
            ctx.globalCompositeOperation = 'source-over';

            time += 1;
        }

        function animate() {
            // マウス位置をスムーズに更新
            mouseX += (targetMouseX - mouseX) * 0.1;
            mouseY += (targetMouseY - mouseY) * 0.1;

            draw();
            requestAnimationFrame(animate);
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // イベントリスナー
        window.addEventListener('resize', resize);

        canvas.addEventListener('mousemove', (e) => {
            targetMouseX = e.clientX;
            targetMouseY = e.clientY;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            targetMouseX = e.touches[0].clientX;
            targetMouseY = e.touches[0].clientY;
        }, { passive: false });

        // 初期化
        resize();
        initWaves();
        targetMouseX = width / 2;
        targetMouseY = height / 2;
        mouseX = targetMouseX;
        mouseY = targetMouseY;
        animate();
    </script>
</body>
</html>
